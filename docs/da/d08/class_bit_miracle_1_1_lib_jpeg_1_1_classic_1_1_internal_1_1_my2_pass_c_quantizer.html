<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/png" href="favicon.png">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta charset="utf-8">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="theme-color" content="black">
<meta name="description" content="Juniper: Cross-platform VR and AR Framework">
<meta name="keywords" content=".NET, C#, units of measure, conversion, open source software, MIT License">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@Sean_McBeth">
<meta property="og:site_name" content="Juniper">
<meta property="og:description" content="Juniper: Cross-platform VR and AR Framework">
<meta name="twitter:description" content="Juniper: Cross-platform VR and AR Framework">
<meta property="og:url" content="https://capnmidnight.github.io/Juniper">
<meta name="twitter:image" content="http://capnmidnight.github.io/Juniper/$logo">
<meta property="og:image" content="http://capnmidnight.github.io/Juniper/$logo">
<meta property="og:title" content="Juniper: BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer Class Reference">
<meta name="twitter:title" content="Juniper: BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer Class Reference">
<title>Juniper: BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <a href="https://github.com/capnmidnight/Juniper" style="position:absolute;right:0;top:0"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_orange_ff7600.png?resize=149%2C149" alt="Fork me on GitHub" data-recalc-dims="1"></a>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <a id="projectlogo" href="https://www.github.com/capnmidnight/Juniper" target="_blank" rel="noopener" title="Project repository"><img alt="Logo" src="../../logo.png"/></a>
  <div id="projectalign">
  	<a id="projectname" href="https://www.github.com/capnmidnight/Juniper" target="_blank" rel="noopener" title="Project repository">Juniper</a>
   	<div id="projectbrief">Cross-platform VR and AR Framework</div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/db9/namespace_bit_miracle.html">BitMiracle</a></li><li class="navelem"><a class="el" href="../../db/dd2/namespace_bit_miracle_1_1_lib_jpeg.html">LibJpeg</a></li><li class="navelem"><a class="el" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html">Classic</a></li><li class="navelem"><a class="el" href="../../d7/dcd/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal.html">Internal</a></li><li class="navelem"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html">My2PassCQuantizer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d3/d33/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d1/ddd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer__inherit__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d8/db1/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a08c4ae34b793d708f7a67c9fd0c3cde3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a08c4ae34b793d708f7a67c9fd0c3cde3">My2PassCQuantizer</a> (<a class="el" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html">JpegDecompressStruct</a> cinfo)</td></tr>
<tr class="memdesc:a08c4ae34b793d708f7a67c9fd0c3cde3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Module initialization routine for 2-pass color quantization.  <a href="#a08c4ae34b793d708f7a67c9fd0c3cde3">More...</a><br /></td></tr>
<tr class="separator:a08c4ae34b793d708f7a67c9fd0c3cde3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01513c9213423b8765fd0a52682f9152"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a01513c9213423b8765fd0a52682f9152">StartPass</a> (bool is_pre_scan)</td></tr>
<tr class="memdesc:a01513c9213423b8765fd0a52682f9152"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize for each processing pass.  <a href="#a01513c9213423b8765fd0a52682f9152">More...</a><br /></td></tr>
<tr class="separator:a01513c9213423b8765fd0a52682f9152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8de85d3359a8f8c50ac775220ced0f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#adc8de85d3359a8f8c50ac775220ced0f">ColorQuantize</a> (byte[][] input_buf, int in_row, byte[][] output_buf, int out_row, int num_rows)</td></tr>
<tr class="separator:adc8de85d3359a8f8c50ac775220ced0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff543b966e10331a5d03a0894d5893f2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aff543b966e10331a5d03a0894d5893f2">FinishPass</a> ()</td></tr>
<tr class="separator:aff543b966e10331a5d03a0894d5893f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2851576dd7ca23155d446365b19ba9eb"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a2851576dd7ca23155d446365b19ba9eb">NewColorMap</a> ()</td></tr>
<tr class="memdesc:a2851576dd7ca23155d446365b19ba9eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch to a new external colormap between output passes.  <a href="#a2851576dd7ca23155d446365b19ba9eb">More...</a><br /></td></tr>
<tr class="separator:a2851576dd7ca23155d446365b19ba9eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a926cf6f7aa09e03093919501da6d77bc"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a> { <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bca9ce6951cc2f6e2c0111a642abcbe716f">QuantizerType.prescan_quantizer</a>, 
<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bcaa7552de9ec137a3fe83c1b4ccc1ffc62">QuantizerType.pass2_fs_dither_quantizer</a>, 
<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bca602444fd471d607bcb22c818d429c0d9">QuantizerType.pass2_no_dither_quantizer</a>
 }</td></tr>
<tr class="separator:a926cf6f7aa09e03093919501da6d77bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4ea32b7f8dbf1b4842374025ffe67242"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4ea32b7f8dbf1b4842374025ffe67242">PrescanQuantize</a> (byte[][] input_buf, int in_row, int num_rows)</td></tr>
<tr class="memdesc:a4ea32b7f8dbf1b4842374025ffe67242"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prescan some rows of pixels. In this module the prescan simply updates the histogram, which has been initialized to zeroes by start_pass. An output_buf parameter is required by the method signature, but no data is actually output (in fact the buffer controller is probably passing a null pointer).  <a href="#a4ea32b7f8dbf1b4842374025ffe67242">More...</a><br /></td></tr>
<tr class="separator:a4ea32b7f8dbf1b4842374025ffe67242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8db3632a5ae3a65d69b0cde7013f517"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa8db3632a5ae3a65d69b0cde7013f517">Pass2FsDither</a> (byte[][] input_buf, int in_row, byte[][] output_buf, int out_row, int num_rows)</td></tr>
<tr class="memdesc:aa8db3632a5ae3a65d69b0cde7013f517"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map some rows of pixels to the output colormapped representation. This version performs Floyd-Steinberg dithering  <a href="#aa8db3632a5ae3a65d69b0cde7013f517">More...</a><br /></td></tr>
<tr class="separator:aa8db3632a5ae3a65d69b0cde7013f517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2026bbc2383648e218bfd699e64e0704"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a2026bbc2383648e218bfd699e64e0704">Pass2NoDither</a> (byte[][] input_buf, int in_row, byte[][] output_buf, int out_row, int num_rows)</td></tr>
<tr class="memdesc:a2026bbc2383648e218bfd699e64e0704"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map some rows of pixels to the output colormapped representation. This version performs no dithering  <a href="#a2026bbc2383648e218bfd699e64e0704">More...</a><br /></td></tr>
<tr class="separator:a2026bbc2383648e218bfd699e64e0704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c433b1880a84a797075905096077456"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a1c433b1880a84a797075905096077456">FinishPass1</a> ()</td></tr>
<tr class="memdesc:a1c433b1880a84a797075905096077456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish up at the end of each pass.  <a href="#a1c433b1880a84a797075905096077456">More...</a><br /></td></tr>
<tr class="separator:a1c433b1880a84a797075905096077456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac970b74f4d27fd1428f2659031772239"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac970b74f4d27fd1428f2659031772239">ComputeColor</a> (<a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a>[] boxlist, int boxIndex, int icolor)</td></tr>
<tr class="memdesc:ac970b74f4d27fd1428f2659031772239"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute representative color for a box, put it in colormap[icolor]  <a href="#ac970b74f4d27fd1428f2659031772239">More...</a><br /></td></tr>
<tr class="separator:ac970b74f4d27fd1428f2659031772239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67b72ad1eb8a38b650218597537865d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a67b72ad1eb8a38b650218597537865d7">SelectColors</a> (int desired_colors)</td></tr>
<tr class="memdesc:a67b72ad1eb8a38b650218597537865d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master routine for color selection  <a href="#a67b72ad1eb8a38b650218597537865d7">More...</a><br /></td></tr>
<tr class="separator:a67b72ad1eb8a38b650218597537865d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66c26ca80bd22cb8cde764b2714add7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad66c26ca80bd22cb8cde764b2714add7">MedianCut</a> (<a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a>[] boxlist, int numboxes, int desired_colors)</td></tr>
<tr class="memdesc:ad66c26ca80bd22cb8cde764b2714add7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Repeatedly select and split the largest box until we have enough boxes  <a href="#ad66c26ca80bd22cb8cde764b2714add7">More...</a><br /></td></tr>
<tr class="separator:ad66c26ca80bd22cb8cde764b2714add7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00e3cdc920829a1e4b4cf9316465b55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab00e3cdc920829a1e4b4cf9316465b55">UpdateBox</a> (<a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a>[] boxlist, int boxIndex)</td></tr>
<tr class="memdesc:ab00e3cdc920829a1e4b4cf9316465b55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shrink the min/max bounds of a box to enclose only nonzero elements, and recompute its volume and population  <a href="#ab00e3cdc920829a1e4b4cf9316465b55">More...</a><br /></td></tr>
<tr class="separator:ab00e3cdc920829a1e4b4cf9316465b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e272a5213eaf85a6f5f65cde653e52b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6e272a5213eaf85a6f5f65cde653e52b">InitErrorLimit</a> ()</td></tr>
<tr class="memdesc:a6e272a5213eaf85a6f5f65cde653e52b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the error-limiting transfer function (lookup table). The raw F-S error computation can potentially compute error values of up to +- MAXJSAMPLE. But we want the maximum correction applied to a pixel to be much less, otherwise obviously wrong pixels will be created. (Typical effects include weird fringes at color-area boundaries, isolated bright pixels in a dark area, etc.) The standard advice for avoiding this problem is to ensure that the "corners" of the color cube are allocated as output colors; then repeated errors in the same direction cannot cause cascading error buildup. However, that only prevents the error from getting completely out of hand; Aaron Giles reports that error limiting improves the results even with corner colors allocated. A simple clamping of the error values to about +- MAXJSAMPLE/8 works pretty well, but the smoother transfer function used below is even better. Thanks to Aaron Giles for this idea.  <a href="#a6e272a5213eaf85a6f5f65cde653e52b">More...</a><br /></td></tr>
<tr class="separator:a6e272a5213eaf85a6f5f65cde653e52b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4370def69e3d03a6a776e99e540c8a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4370def69e3d03a6a776e99e540c8a2">FindNearbyColors</a> (int minc0, int minc1, int minc2, byte[] colorlist)</td></tr>
<tr class="memdesc:aa4370def69e3d03a6a776e99e540c8a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locate the colormap entries close enough to an update box to be candidates for the nearest entry to some cell(s) in the update box. The update box is specified by the center coordinates of its first cell. The number of candidate colormap entries is returned, and their colormap indexes are placed in colorlist[]. This routine uses Heckbert's "locally sorted search" criterion to select the colors that need further consideration.  <a href="#aa4370def69e3d03a6a776e99e540c8a2">More...</a><br /></td></tr>
<tr class="separator:aa4370def69e3d03a6a776e99e540c8a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54933d0f153bda59f71a0176d7a7cf99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a54933d0f153bda59f71a0176d7a7cf99">FindBestColors</a> (int minc0, int minc1, int minc2, int numcolors, byte[] colorlist, byte[] bestcolor)</td></tr>
<tr class="memdesc:a54933d0f153bda59f71a0176d7a7cf99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the closest colormap entry for each cell in the update box, given the list of candidate colors prepared by find_nearby_colors. Return the indexes of the closest entries in the bestcolor[] array. This routine uses Thomas' incremental distance calculation method to find the distance from a colormap entry to successive cells in the box.  <a href="#a54933d0f153bda59f71a0176d7a7cf99">More...</a><br /></td></tr>
<tr class="separator:a54933d0f153bda59f71a0176d7a7cf99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eb7692eaf79508bbac0c5f393da4aa5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a9eb7692eaf79508bbac0c5f393da4aa5">FillInverseCMap</a> (int c0, int c1, int c2)</td></tr>
<tr class="memdesc:a9eb7692eaf79508bbac0c5f393da4aa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill the inverse-colormap entries in the update box that contains histogram cell c0/c1/c2. (Only that one cell MUST be filled, but we can fill as many others as we wish.)  <a href="#a9eb7692eaf79508bbac0c5f393da4aa5">More...</a><br /></td></tr>
<tr class="separator:a9eb7692eaf79508bbac0c5f393da4aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a25802ae74942487cd3a37aba2273c6ba"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a25802ae74942487cd3a37aba2273c6ba">FindBiggestColorPop</a> (<a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a>[] boxlist, int numboxes)</td></tr>
<tr class="memdesc:a25802ae74942487cd3a37aba2273c6ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the splittable box with the largest color population Returns null if no splittable boxes remain  <a href="#a25802ae74942487cd3a37aba2273c6ba">More...</a><br /></td></tr>
<tr class="separator:a25802ae74942487cd3a37aba2273c6ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d239b5c7a30c67c245eb685409c2949"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6d239b5c7a30c67c245eb685409c2949">FindBiggestVolume</a> (<a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a>[] boxlist, int numboxes)</td></tr>
<tr class="memdesc:a6d239b5c7a30c67c245eb685409c2949"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the splittable box with the largest (scaled) volume Returns null if no splittable boxes remain  <a href="#a6d239b5c7a30c67c245eb685409c2949">More...</a><br /></td></tr>
<tr class="separator:a6d239b5c7a30c67c245eb685409c2949"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a11f13829c4370b4660ac0582dbe65948"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">MAXNUMCOLORS</a> = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a62e5231b58de0febd2f19654ff6cbf87">JpegConstants.MAXJSAMPLE</a> + 1)</td></tr>
<tr class="separator:a11f13829c4370b4660ac0582dbe65948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a643ee6dc79ec344da721746786e3a451"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a643ee6dc79ec344da721746786e3a451">HIST_C0_BITS</a> = 5</td></tr>
<tr class="separator:a643ee6dc79ec344da721746786e3a451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad56ff05f095ee2cf9f8ef8fb43926449"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad56ff05f095ee2cf9f8ef8fb43926449">HIST_C1_BITS</a> = 6</td></tr>
<tr class="separator:ad56ff05f095ee2cf9f8ef8fb43926449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50f6f5c91111779c8540a8d072d65bb7"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a50f6f5c91111779c8540a8d072d65bb7">HIST_C2_BITS</a> = 5</td></tr>
<tr class="separator:a50f6f5c91111779c8540a8d072d65bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7e716120ad35cfb7159a80d5152e23"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ade7e716120ad35cfb7159a80d5152e23">HIST_C0_ELEMS</a> = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a643ee6dc79ec344da721746786e3a451">HIST_C0_BITS</a>)</td></tr>
<tr class="separator:ade7e716120ad35cfb7159a80d5152e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63438b3a466975b2e1b40ab6251e3ddf"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a63438b3a466975b2e1b40ab6251e3ddf">HIST_C1_ELEMS</a> = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad56ff05f095ee2cf9f8ef8fb43926449">HIST_C1_BITS</a>)</td></tr>
<tr class="separator:a63438b3a466975b2e1b40ab6251e3ddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ee29b7f1a298ee35bc62284759c1a3"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a> = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a50f6f5c91111779c8540a8d072d65bb7">HIST_C2_BITS</a>)</td></tr>
<tr class="separator:ac3ee29b7f1a298ee35bc62284759c1a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70bff91e9e294d1fb2ec77f6de0cb5f"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a> = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a46a401a8a3a1cbe0d8b640b1aa5d0de3">JpegConstants.BITS_IN_JSAMPLE</a> - <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a643ee6dc79ec344da721746786e3a451">HIST_C0_BITS</a>)</td></tr>
<tr class="separator:af70bff91e9e294d1fb2ec77f6de0cb5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cbff41160f266164b584254c96d3b51"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a> = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a46a401a8a3a1cbe0d8b640b1aa5d0de3">JpegConstants.BITS_IN_JSAMPLE</a> - <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad56ff05f095ee2cf9f8ef8fb43926449">HIST_C1_BITS</a>)</td></tr>
<tr class="separator:a5cbff41160f266164b584254c96d3b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51789295718b3442c46a30da1d60b9d"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a> = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a46a401a8a3a1cbe0d8b640b1aa5d0de3">JpegConstants.BITS_IN_JSAMPLE</a> - <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a50f6f5c91111779c8540a8d072d65bb7">HIST_C2_BITS</a>)</td></tr>
<tr class="separator:aa51789295718b3442c46a30da1d60b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa475c2f6ee5d41cd6680397cb8d93a57"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a> = 2</td></tr>
<tr class="separator:aa475c2f6ee5d41cd6680397cb8d93a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a5513c6f61d0d5ac255dc74e328664"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a> = 3</td></tr>
<tr class="separator:af5a5513c6f61d0d5ac255dc74e328664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92a2da962f35cf7ec31d776f64fb5333"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a> = 1</td></tr>
<tr class="separator:a92a2da962f35cf7ec31d776f64fb5333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a554afa7e9e99af64c19ca4daeaa28e34"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BOX_C0_LOG</a> = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a643ee6dc79ec344da721746786e3a451">HIST_C0_BITS</a> - 3)</td></tr>
<tr class="separator:a554afa7e9e99af64c19ca4daeaa28e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab864a7d4031b001e0a74680b63d56cb1"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BOX_C1_LOG</a> = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad56ff05f095ee2cf9f8ef8fb43926449">HIST_C1_BITS</a> - 3)</td></tr>
<tr class="separator:ab864a7d4031b001e0a74680b63d56cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af706d02b121bde838f13ff27fd5f8254"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BOX_C2_LOG</a> = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a50f6f5c91111779c8540a8d072d65bb7">HIST_C2_BITS</a> - 3)</td></tr>
<tr class="separator:af706d02b121bde838f13ff27fd5f8254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743c6259425a2ead8d5df23305a4abaa"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BOX_C0_ELEMS</a> = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BOX_C0_LOG</a>)</td></tr>
<tr class="separator:a743c6259425a2ead8d5df23305a4abaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eefc63e4fb5b77b7fdd2a1b043ac8bb"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BOX_C1_ELEMS</a> = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BOX_C1_LOG</a>)</td></tr>
<tr class="separator:a8eefc63e4fb5b77b7fdd2a1b043ac8bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bca3acf719ee5715936d960c9262ddc"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BOX_C2_ELEMS</a> = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BOX_C2_LOG</a>)</td></tr>
<tr class="separator:a8bca3acf719ee5715936d960c9262ddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28e7c493c6453a187e4c6abe4cbfabd"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad28e7c493c6453a187e4c6abe4cbfabd">BOX_C0_SHIFT</a> = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a> + <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BOX_C0_LOG</a>)</td></tr>
<tr class="separator:ad28e7c493c6453a187e4c6abe4cbfabd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5309a6ce089407b946484266129d51"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aab5309a6ce089407b946484266129d51">BOX_C1_SHIFT</a> = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a> + <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BOX_C1_LOG</a>)</td></tr>
<tr class="separator:aab5309a6ce089407b946484266129d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae21e859aa091ecfd7314878f7d022b68"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ae21e859aa091ecfd7314878f7d022b68">BOX_C2_SHIFT</a> = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a> + <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BOX_C2_LOG</a>)</td></tr>
<tr class="separator:ae21e859aa091ecfd7314878f7d022b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3484e7a3779ad8aa58b1e62c3fde61ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a3484e7a3779ad8aa58b1e62c3fde61ff">m_quantizer</a></td></tr>
<tr class="separator:a3484e7a3779ad8aa58b1e62c3fde61ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ade4e08383ee5340edf9fdc00fe5c09"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5ade4e08383ee5340edf9fdc00fe5c09">m_useFinishPass1</a></td></tr>
<tr class="separator:a5ade4e08383ee5340edf9fdc00fe5c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab393fee31404454bfedde156f23a124f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html">JpegDecompressStruct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a></td></tr>
<tr class="separator:ab393fee31404454bfedde156f23a124f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d42672e49b487b1b8e135a9e4ebfbc7"><td class="memItemLeft" align="right" valign="top">readonly byte [][]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4d42672e49b487b1b8e135a9e4ebfbc7">m_sv_colormap</a></td></tr>
<tr class="separator:a4d42672e49b487b1b8e135a9e4ebfbc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4a831c200381d167aa924f4ea0d6a31"><td class="memItemLeft" align="right" valign="top">readonly int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4a831c200381d167aa924f4ea0d6a31">m_desired</a></td></tr>
<tr class="separator:aa4a831c200381d167aa924f4ea0d6a31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f7c7fbd2f211d02e0bd908c8a7242c"><td class="memItemLeft" align="right" valign="top">readonly ushort [][]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a></td></tr>
<tr class="separator:a11f7c7fbd2f211d02e0bd908c8a7242c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8f159830fa30d22a8d633edf17ca05b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">m_needs_zeroed</a></td></tr>
<tr class="separator:ac8f159830fa30d22a8d633edf17ca05b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb9f4dc0abdb7bd495cc0d7a9aed7fbb"><td class="memItemLeft" align="right" valign="top">short []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a></td></tr>
<tr class="separator:aeb9f4dc0abdb7bd495cc0d7a9aed7fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34ed79d43928a67015eb6fcb587d6511"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a34ed79d43928a67015eb6fcb587d6511">m_on_odd_row</a></td></tr>
<tr class="separator:a34ed79d43928a67015eb6fcb587d6511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33003b295a07de862dc309a713de6a4c"><td class="memItemLeft" align="right" valign="top">int []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a></td></tr>
<tr class="separator:a33003b295a07de862dc309a713de6a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module implements the well-known Heckbert paradigm for color quantization. Most of the ideas used here can be traced back to Heckbert's seminal paper Heckbert, Paul. "Color Image Quantization for Frame Buffer Display", Proc. SIGGRAPH '82, Computer Graphics v.16 #3 (July 1982), pp 297-304. </p>
<p>In the first pass over the image, we accumulate a histogram showing the usage count of each possible color. To keep the histogram to a reasonable size, we reduce the precision of the input; typical practice is to retain 5 or 6 bits per color, so that 8 or 4 different input values are counted in the same histogram cell. </p>
<p>Next, the color-selection step begins with a box representing the whole color space, and repeatedly splits the "largest" remaining box until we have as many boxes as desired colors. Then the mean color in each remaining box becomes one of the possible output colors. </p>
<p>The second pass over the image maps each input pixel to the closest output color (optionally after applying a Floyd-Steinberg dithering correction). This mapping is logically trivial, but making it go fast enough requires considerable care. </p>
<p>Heckbert-style quantizers vary a good deal in their policies for choosing the "largest" box and deciding where to cut it. The particular policies used here have proved out well in experimental comparisons, but better ones may yet be found. </p>
<p>In earlier versions of the IJG code, this module quantized in YCbCr color space, processing the raw upsampled data without a color conversion step. This allowed the color conversion math to be done only once per colormap entry, not once per pixel. However, that optimization precluded other useful optimizations (such as merging color conversion with upsampling) and it also interfered with desired capabilities such as quantizing to an externally-supplied colormap. We have therefore abandoned that approach. The present code works in the post-conversion color space, typically RGB. </p>
<p>To improve the visual quality of the results, we actually work in scaled RGB space, giving G distances more weight than R, and R in turn more than B. To do everything in integer math, we must use integer scale factors. The 2/3/1 scale factors used here correspond loosely to the relative weights of the colors in the NTSC grayscale equation. If you want to use this code to quantize a non-RGB color space, you'll probably need to change these scale factors. </p>
<p>First we have the histogram data structure and routines for creating it.</p>
<p>The number of bits of precision can be adjusted by changing these symbols. We recommend keeping 6 bits for G and 5 each for R and B. If you have plenty of memory and cycles, 6 bits all around gives marginally better results; if you are short of memory, 5 bits all around will save some space but degrade the results. To maintain a fully accurate histogram, we'd need to allocate a "long" (preferably unsigned long) for each cell. In practice this is overkill; we can get by with 16 bits per cell. Few of the cell counts will overflow, and clamping those that do overflow to the maximum value will give close- enough results. This reduces the recommended histogram size from 256Kb to 128Kb, which is a useful savings on PC-class machines. (In the second pass the histogram space is re-used for pixel mapping data; in that capacity, each cell must be able to store zero to the number of desired colors. 16 bits/cell is plenty for that too.) Since the JPEG code is intended to run in small memory model on 80x86 machines, we can't just allocate the histogram in one chunk. Instead of a true 3-D array, we use a row of pointers to 2-D arrays. Each pointer corresponds to a C0 value (typically 2^5 = 32 pointers) and each 2-D array has 2^6*2^5 = 2048 or 2^6*2^6 = 4096 entries. Note that on 80x86 machines, the pointer row is in near memory but the actual arrays are in far memory (same arrangement as we use for image arrays). </p>
<p>Declarations for Floyd-Steinberg dithering.</p>
<p>Errors are accumulated into the array fserrors[], at a resolution of 1/16th of a pixel count. The error at a given pixel is propagated to its not-yet-processed neighbors using the standard F-S fractions, ... (here) 7/16 3/16 5/16 1/16 We work left-to-right on even rows, right-to-left on odd rows. </p>
<p>We can get away with a single array (holding one row's worth of errors) by using it to store the current row's errors at pixel columns not yet processed, but the next row's errors at columns already processed. We need only a few extra variables to hold the errors immediately around the current column. (If we are lucky, those variables are in registers, but even if not, they're probably cheaper to access than array elements are.) </p>
<p>The fserrors[] array has (#columns + 2) entries; the extra entry at each end saves us from special-casing the first and last pixels. Each entry is three values long, one value for each color component. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00117">117</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a926cf6f7aa09e03093919501da6d77bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a926cf6f7aa09e03093919501da6d77bc">&#9670;&nbsp;</a></span>QuantizerType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.QuantizerType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a926cf6f7aa09e03093919501da6d77bca9ce6951cc2f6e2c0111a642abcbe716f"></a>prescan_quantizer&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a926cf6f7aa09e03093919501da6d77bcaa7552de9ec137a3fe83c1b4ccc1ffc62"></a>pass2_fs_dither_quantizer&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a926cf6f7aa09e03093919501da6d77bca602444fd471d607bcb22c818d429c0d9"></a>pass2_no_dither_quantizer&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00134">134</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            prescan_quantizer,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            pass2_fs_dither_quantizer,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            pass2_no_dither_quantizer</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a08c4ae34b793d708f7a67c9fd0c3cde3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c4ae34b793d708f7a67c9fd0c3cde3">&#9670;&nbsp;</a></span>My2PassCQuantizer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html">JpegDecompressStruct</a>&#160;</td>
          <td class="paramname"><em>cinfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Module initialization routine for 2-pass color quantization. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">200</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a> = cinfo;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="comment">/* Make sure jdmaster didn&#39;t give me a case I can&#39;t handle */</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">if</span> (cinfo.outColorComponents != 3)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                cinfo.<a class="code" href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#ac9626d374df0f986e8e417598a612501">ErrExit</a>(<a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">JMessageCode</a>.JERR_NOTIMPL);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">/* Allocate the histogram/inverse colormap storage */</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a> = <span class="keyword">new</span> ushort[<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ade7e716120ad35cfb7159a80d5152e23">HIST_C0_ELEMS</a>][];</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">for</span> (var i = 0; i &lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ade7e716120ad35cfb7159a80d5152e23">HIST_C0_ELEMS</a>; i++)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[i] = <span class="keyword">new</span> ushort[<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a63438b3a466975b2e1b40ab6251e3ddf">HIST_C1_ELEMS</a> * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>];</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">m_needs_zeroed</a> = <span class="keyword">true</span>; <span class="comment">/* histogram is garbage now */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="comment">/* Allocate storage for the completed colormap, if required.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">            * We do this now since it is FAR storage and may affect</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">            * the memory manager&#39;s space calculations.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">if</span> (cinfo.enable2PassQuant)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="comment">/* Make sure color count is acceptable */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                var desired_local = cinfo.desiredNumberOfColors;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="comment">/* Lower bound on # of colors ... somewhat arbitrary as long as &gt; 0 */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">if</span> (desired_local &lt; 8)</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    cinfo.ErrExit(<a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">JMessageCode</a>.JERR_QUANT_FEW_COLORS, 8);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="comment">/* Make sure colormap indexes can be represented by JSAMPLEs */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordflow">if</span> (desired_local &gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">MAXNUMCOLORS</a>)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    cinfo.ErrExit(<a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">JMessageCode</a>.JERR_QUANT_MANY_COLORS, <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">MAXNUMCOLORS</a>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4d42672e49b487b1b8e135a9e4ebfbc7">m_sv_colormap</a> = JpegCommonStruct.AllocJpegSamples(desired_local, 3);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4a831c200381d167aa924f4ea0d6a31">m_desired</a> = desired_local;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="comment">/* Only F-S dithering or no dithering is supported. */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="comment">/* If user asks for ordered dither, give him F-S. */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">if</span> (cinfo.ditherMode != <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">JDitherMode</a>.JDITHER_NONE)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                cinfo.ditherMode = <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">JDitherMode</a>.JDITHER_FS;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="comment">/* Allocate Floyd-Steinberg workspace if necessary.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">            * This isn&#39;t really needed until pass 2, but again it is FAR storage.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">            * Although we will cope with a later change in dither_mode,</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">            * we do not promise to honor max_memory_to_use if dither_mode changes.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">if</span> (cinfo.ditherMode == <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">JDitherMode</a>.JDITHER_FS)</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a> = <span class="keyword">new</span> <span class="keywordtype">short</span>[(cinfo.outputWidth + 2) * 3];</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="comment">/* Might as well create the error-limiting table too. */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6e272a5213eaf85a6f5f65cde653e52b">InitErrorLimit</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f13829c4370b4660ac0582dbe65948"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a></div><div class="ttdeci">const int MAXNUMCOLORS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">My2PassCQuantizer.cs:141</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct_html_ac9626d374df0f986e8e417598a612501"><div class="ttname"><a href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#ac9626d374df0f986e8e417598a612501">BitMiracle.LibJpeg.Classic.JpegCommonStruct.ErrExit</a></div><div class="ttdeci">void ErrExit(JMessageCode code)</div><div class="ttdoc">Used for fatal errors (print message and exit).</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00238">JpegCommonStruct.cs:238</a></div></div>
<div class="ttc" id="namespace_bit_miracle_1_1_lib_jpeg_1_1_classic_html_afdd494a350f54a251aec2029ffe2af09"><div class="ttname"><a href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">BitMiracle.LibJpeg.Classic.JDitherMode</a></div><div class="ttdeci">JDitherMode</div><div class="ttdoc">Dithering options for decompression.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbc/_j_dither_mode_8cs_source.html#l00007">JDitherMode.cs:7</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac8f159830fa30d22a8d633edf17ca05b"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a></div><div class="ttdeci">bool m_needs_zeroed</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">My2PassCQuantizer.cs:190</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ade7e716120ad35cfb7159a80d5152e23"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ade7e716120ad35cfb7159a80d5152e23">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C0_ELEMS</a></div><div class="ttdeci">const int HIST_C0_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00151">My2PassCQuantizer.cs:151</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac3ee29b7f1a298ee35bc62284759c1a3"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a></div><div class="ttdeci">const int HIST_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">My2PassCQuantizer.cs:153</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a4d42672e49b487b1b8e135a9e4ebfbc7"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4d42672e49b487b1b8e135a9e4ebfbc7">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_sv_colormap</a></div><div class="ttdeci">readonly byte [][] m_sv_colormap</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00184">My2PassCQuantizer.cs:184</a></div></div>
<div class="ttc" id="namespace_bit_miracle_1_1_lib_jpeg_1_1_classic_html_aab8bad2276ed9756ee236284df1ced9f"><div class="ttname"><a href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">BitMiracle.LibJpeg.Classic.JMessageCode</a></div><div class="ttdeci">JMessageCode</div><div class="ttdoc">Message codes used in code to signal errors, warning and trace messages.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc8/_j_message_code_8cs_source.html#l00011">JMessageCode.cs:11</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aeb9f4dc0abdb7bd495cc0d7a9aed7fbb"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_fserrors</a></div><div class="ttdeci">short [] m_fserrors</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00193">My2PassCQuantizer.cs:193</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a6e272a5213eaf85a6f5f65cde653e52b"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6e272a5213eaf85a6f5f65cde653e52b">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.InitErrorLimit</a></div><div class="ttdeci">void InitErrorLimit()</div><div class="ttdoc">Initialize the error-limiting transfer function (lookup table). The raw F-S error computation can pot...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01072">My2PassCQuantizer.cs:1072</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a63438b3a466975b2e1b40ab6251e3ddf"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a63438b3a466975b2e1b40ab6251e3ddf">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C1_ELEMS</a></div><div class="ttdeci">const int HIST_C1_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00152">My2PassCQuantizer.cs:152</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa4a831c200381d167aa924f4ea0d6a31"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4a831c200381d167aa924f4ea0d6a31">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_desired</a></div><div class="ttdeci">readonly int m_desired</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00185">My2PassCQuantizer.cs:185</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.JpegCommonStruct.AllocJpegSamples()</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00049">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.desiredNumberOfColors</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00047">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.ditherMode</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00052">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.enable2PassQuant</a>, <a class="el" href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00238">BitMiracle.LibJpeg.Classic.JpegCommonStruct.ErrExit()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00151">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C0_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00152">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C1_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01072">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.InitErrorLimit()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00185">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_desired</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00193">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_fserrors</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00184">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_sv_colormap</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00056">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outColorComponents</a>, and <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adc8de85d3359a8f8c50ac775220ced0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8de85d3359a8f8c50ac775220ced0f">&#9670;&nbsp;</a></span>ColorQuantize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ColorQuantize </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>input_buf</em>[][], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>in_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>output_buf</em>[][], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>out_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d2/d0d/interface_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_i_jpeg_color_quantizer.html#a69e4467e5ec4bbc88d9b44457f5b38cb">BitMiracle.LibJpeg.Classic.Internal.IJpegColorQuantizer</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00346">346</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a3484e7a3779ad8aa58b1e62c3fde61ff">m_quantizer</a>)</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a>.prescan_quantizer:</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4ea32b7f8dbf1b4842374025ffe67242">PrescanQuantize</a>(input_buf, in_row, num_rows);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a>.pass2_fs_dither_quantizer:</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa8db3632a5ae3a65d69b0cde7013f517">Pass2FsDither</a>(input_buf, in_row, output_buf, out_row, num_rows);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a>.pass2_no_dither_quantizer:</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a2026bbc2383648e218bfd699e64e0704">Pass2NoDither</a>(input_buf, in_row, output_buf, out_row, num_rows);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#ac9626d374df0f986e8e417598a612501">ErrExit</a>(<a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">JMessageCode</a>.JERR_NOTIMPL);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct_html_ac9626d374df0f986e8e417598a612501"><div class="ttname"><a href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#ac9626d374df0f986e8e417598a612501">BitMiracle.LibJpeg.Classic.JpegCommonStruct.ErrExit</a></div><div class="ttdeci">void ErrExit(JMessageCode code)</div><div class="ttdoc">Used for fatal errors (print message and exit).</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00238">JpegCommonStruct.cs:238</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a3484e7a3779ad8aa58b1e62c3fde61ff"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a3484e7a3779ad8aa58b1e62c3fde61ff">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_quantizer</a></div><div class="ttdeci">QuantizerType m_quantizer</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00177">My2PassCQuantizer.cs:177</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a4ea32b7f8dbf1b4842374025ffe67242"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4ea32b7f8dbf1b4842374025ffe67242">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize</a></div><div class="ttdeci">void PrescanQuantize(byte[][] input_buf, int in_row, int num_rows)</div><div class="ttdoc">Prescan some rows of pixels. In this module the prescan simply updates the histogram,...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">My2PassCQuantizer.cs:390</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a2026bbc2383648e218bfd699e64e0704"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a2026bbc2383648e218bfd699e64e0704">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither</a></div><div class="ttdeci">void Pass2NoDither(byte[][] input_buf, int in_row, byte[][] output_buf, int out_row, int num_rows)</div><div class="ttdoc">Map some rows of pixels to the output colormapped representation. This version performs no dithering</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">My2PassCQuantizer.cs:567</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="namespace_bit_miracle_1_1_lib_jpeg_1_1_classic_html_aab8bad2276ed9756ee236284df1ced9f"><div class="ttname"><a href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">BitMiracle.LibJpeg.Classic.JMessageCode</a></div><div class="ttdeci">JMessageCode</div><div class="ttdoc">Message codes used in code to signal errors, warning and trace messages.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc8/_j_message_code_8cs_source.html#l00011">JMessageCode.cs:11</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa8db3632a5ae3a65d69b0cde7013f517"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa8db3632a5ae3a65d69b0cde7013f517">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither</a></div><div class="ttdeci">void Pass2FsDither(byte[][] input_buf, int in_row, byte[][] output_buf, int out_row, int num_rows)</div><div class="ttdoc">Map some rows of pixels to the output colormapped representation. This version performs Floyd-Steinbe...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">My2PassCQuantizer.cs:417</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a926cf6f7aa09e03093919501da6d77bc"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.QuantizerType</a></div><div class="ttdeci">QuantizerType</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00134">My2PassCQuantizer.cs:134</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00238">BitMiracle.LibJpeg.Classic.JpegCommonStruct.ErrExit()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_quantizer</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize()</a>.</p>

</div>
</div>
<a id="ac970b74f4d27fd1428f2659031772239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac970b74f4d27fd1428f2659031772239">&#9670;&nbsp;</a></span>ComputeColor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a> []&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>boxIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>icolor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute representative color for a box, put it in colormap[icolor] </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">620</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="comment">/* Current algorithm: mean weighted by pixels (not colors) */</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="comment">/* Note it is important to get the rounding correct! */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keywordtype">long</span> total = 0;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordtype">long</span> c0total = 0;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordtype">long</span> c1total = 0;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordtype">long</span> c2total = 0;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            var curBox = boxlist[boxIndex];</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">for</span> (var c0 = curBox.c0min; c0 &lt;= curBox.c0max; c0++)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="keywordflow">for</span> (var c1 = curBox.c1min; c1 &lt;= curBox.c1max; c1++)</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                    var histogramIndex = (c1 * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + curBox.c2min;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    for (var c2 = curBox.c2min; c2 &lt;= curBox.c2max; c2++)</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                        <span class="keywordtype">long</span> count = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex];</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                        histogramIndex++;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                        <span class="keywordflow">if</span> (count != 0)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                        {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                            total += count;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                            c0total += ((c0 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>) + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>) &gt;&gt; 1)) * count;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                            c1total += ((c1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) &gt;&gt; 1)) * count;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                            c2total += ((c2 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>) + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>) &gt;&gt; 1)) * count;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                        }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[0][icolor] = (byte)((c0total + (total &gt;&gt; 1)) / total);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[1][icolor] = (byte)((c1total + (total &gt;&gt; 1)) / total);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[2][icolor] = (byte)((c2total + (total &gt;&gt; 1)) / total);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a78e148e332b3d7f0fb7539cb6bc2c612"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a></div><div class="ttdeci">internal byte [][] m_colormap</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">JpegDecompressStruct.cs:66</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac3ee29b7f1a298ee35bc62284759c1a3"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a></div><div class="ttdeci">const int HIST_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">My2PassCQuantizer.cs:153</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00126">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c2min</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>.</p>

</div>
</div>
<a id="a9eb7692eaf79508bbac0c5f393da4aa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eb7692eaf79508bbac0c5f393da4aa5">&#9670;&nbsp;</a></span>FillInverseCMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fill the inverse-colormap entries in the update box that contains histogram cell c0/c1/c2. (Only that one cell MUST be filled, but we can fill as many others as we wish.) </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">1414</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            <span class="comment">/* Convert cell coordinates to update box ID */</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            c0 &gt;&gt;= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BOX_C0_LOG</a>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            c1 &gt;&gt;= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BOX_C1_LOG</a>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            c2 &gt;&gt;= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BOX_C2_LOG</a>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            <span class="comment">/* Compute true coordinates of update box&#39;s origin corner.</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">             * Actually we compute the coordinates of the center of the corner</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">             * histogram cell, which are the lower bounds of the volume we care about.</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            var minc0 = (c0 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad28e7c493c6453a187e4c6abe4cbfabd">BOX_C0_SHIFT</a>) + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>) &gt;&gt; 1);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            var minc1 = (c1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aab5309a6ce089407b946484266129d51">BOX_C1_SHIFT</a>) + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) &gt;&gt; 1);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            var minc2 = (c2 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ae21e859aa091ecfd7314878f7d022b68">BOX_C2_SHIFT</a>) + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>) &gt;&gt; 1);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            <span class="comment">/* Determine which colormap entries are close enough to be candidates</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">             * for the nearest entry to some cell in the update box.</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="comment">/* This array lists the candidate colormap indexes. */</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            var colorlist = <span class="keyword">new</span> <span class="keywordtype">byte</span>[<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">MAXNUMCOLORS</a>];</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            var numcolors = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4370def69e3d03a6a776e99e540c8a2">FindNearbyColors</a>(minc0, minc1, minc2, colorlist);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            <span class="comment">/* Determine the actually nearest colors. */</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <span class="comment">/* This array holds the actually closest colormap index for each cell. */</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            var bestcolor = <span class="keyword">new</span> <span class="keywordtype">byte</span>[<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BOX_C0_ELEMS</a> * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BOX_C1_ELEMS</a> * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BOX_C2_ELEMS</a>];</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a54933d0f153bda59f71a0176d7a7cf99">FindBestColors</a>(minc0, minc1, minc2, numcolors, colorlist, bestcolor);</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;            <span class="comment">/* Save the best color numbers (plus 1) in the main cache array */</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            c0 &lt;&lt;= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BOX_C0_LOG</a>;      <span class="comment">/* convert ID back to base cell indexes */</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            c1 &lt;&lt;= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BOX_C1_LOG</a>;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            c2 &lt;&lt;= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BOX_C2_LOG</a>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            var bestcolorIndex = 0;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            <span class="keywordflow">for</span> (var ic0 = 0; ic0 &lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BOX_C0_ELEMS</a>; ic0++)</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                <span class="keywordflow">for</span> (var ic1 = 0; ic1 &lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BOX_C1_ELEMS</a>; ic1++)</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                {</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                    var histogramIndex = ((c1 + ic1) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + c2;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                    <span class="keywordflow">for</span> (var ic2 = 0; ic2 &lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BOX_C2_ELEMS</a>; ic2++)</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                    {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                        <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0 + ic0][histogramIndex] = (ushort)(bestcolor[bestcolorIndex] + 1);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                        histogramIndex++;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                        bestcolorIndex++;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                    }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f13829c4370b4660ac0582dbe65948"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a></div><div class="ttdeci">const int MAXNUMCOLORS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">My2PassCQuantizer.cs:141</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a554afa7e9e99af64c19ca4daeaa28e34"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_LOG</a></div><div class="ttdeci">const int BOX_C0_LOG</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00165">My2PassCQuantizer.cs:165</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a8bca3acf719ee5715936d960c9262ddc"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_ELEMS</a></div><div class="ttdeci">const int BOX_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00171">My2PassCQuantizer.cs:171</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a8eefc63e4fb5b77b7fdd2a1b043ac8bb"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_ELEMS</a></div><div class="ttdeci">const int BOX_C1_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00170">My2PassCQuantizer.cs:170</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac3ee29b7f1a298ee35bc62284759c1a3"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a></div><div class="ttdeci">const int HIST_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">My2PassCQuantizer.cs:153</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af706d02b121bde838f13ff27fd5f8254"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_LOG</a></div><div class="ttdeci">const int BOX_C2_LOG</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00167">My2PassCQuantizer.cs:167</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aab5309a6ce089407b946484266129d51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aab5309a6ce089407b946484266129d51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_SHIFT</a></div><div class="ttdeci">const int BOX_C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00174">My2PassCQuantizer.cs:174</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab864a7d4031b001e0a74680b63d56cb1"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_LOG</a></div><div class="ttdeci">const int BOX_C1_LOG</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00166">My2PassCQuantizer.cs:166</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a54933d0f153bda59f71a0176d7a7cf99"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a54933d0f153bda59f71a0176d7a7cf99">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors</a></div><div class="ttdeci">void FindBestColors(int minc0, int minc1, int minc2, int numcolors, byte[] colorlist, byte[] bestcolor)</div><div class="ttdoc">Find the closest colormap entry for each cell in the update box, given the list of candidate colors p...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">My2PassCQuantizer.cs:1332</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ad28e7c493c6453a187e4c6abe4cbfabd"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad28e7c493c6453a187e4c6abe4cbfabd">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_SHIFT</a></div><div class="ttdeci">const int BOX_C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00173">My2PassCQuantizer.cs:173</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa4370def69e3d03a6a776e99e540c8a2"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4370def69e3d03a6a776e99e540c8a2">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors</a></div><div class="ttdeci">int FindNearbyColors(int minc0, int minc1, int minc2, byte[] colorlist)</div><div class="ttdoc">Locate the colormap entries close enough to an update box to be candidates for the nearest entry to s...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">My2PassCQuantizer.cs:1177</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ae21e859aa091ecfd7314878f7d022b68"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ae21e859aa091ecfd7314878f7d022b68">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_SHIFT</a></div><div class="ttdeci">const int BOX_C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00175">My2PassCQuantizer.cs:175</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a743c6259425a2ead8d5df23305a4abaa"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_ELEMS</a></div><div class="ttdeci">const int BOX_C0_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00169">My2PassCQuantizer.cs:169</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00169">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00165">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_LOG</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00173">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00170">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00166">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_LOG</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00174">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00171">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00167">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_LOG</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00175">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>.</p>

</div>
</div>
<a id="a54933d0f153bda59f71a0176d7a7cf99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54933d0f153bda59f71a0176d7a7cf99">&#9670;&nbsp;</a></span>FindBestColors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minc0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minc1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minc2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numcolors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte []&#160;</td>
          <td class="paramname"><em>colorlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte []&#160;</td>
          <td class="paramname"><em>bestcolor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the closest colormap entry for each cell in the update box, given the list of candidate colors prepared by find_nearby_colors. Return the indexes of the closest entries in the bestcolor[] array. This routine uses Thomas' incremental distance calculation method to find the distance from a colormap entry to successive cells in the box. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">1332</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            <span class="comment">/* Nominal steps between cell centers (&quot;x&quot; in Thomas article) */</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> STEP_C0 = ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> STEP_C1 = ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> STEP_C2 = ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <span class="comment">/* This array holds the distance to the nearest-so-far color for each cell */</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            var bestdist = <span class="keyword">new</span> <span class="keywordtype">int</span>[<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BOX_C0_ELEMS</a> * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BOX_C1_ELEMS</a> * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BOX_C2_ELEMS</a>];</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            <span class="comment">/* Initialize best-distance for each cell of the update box */</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            var bestIndex = 0;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            <span class="keywordflow">for</span> (var i = (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BOX_C0_ELEMS</a> * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BOX_C1_ELEMS</a> * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BOX_C2_ELEMS</a>) - 1; i &gt;= 0; i--)</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                bestdist[bestIndex] = 0x7FFFFFFF;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                bestIndex++;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="comment">/* For each color selected by find_nearby_colors,</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment">             * compute its distance to the center of each cell in the box.</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">             * If that&#39;s less than best-so-far, update best distance and color number.</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">for</span> (var i = 0; i &lt; numcolors; i++)</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                <span class="keywordtype">int</span> icolor = colorlist[i];</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                <span class="comment">/* Compute (square of) distance from minc0/c1/c2 to this color */</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                var inc0 = (minc0 - <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[0][icolor]) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                var dist0 = inc0 * inc0;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                var inc1 = (minc1 - <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[1][icolor]) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                dist0 += inc1 * inc1;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                var inc2 = (minc2 - <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[2][icolor]) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                dist0 += inc2 * inc2;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                <span class="comment">/* Form the initial difference increments */</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                inc0 = (inc0 * (2 * STEP_C0)) + (STEP_C0 * STEP_C0);</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                inc1 = (inc1 * (2 * STEP_C1)) + (STEP_C1 * STEP_C1);</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                inc2 = (inc2 * (2 * STEP_C2)) + (STEP_C2 * STEP_C2);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                <span class="comment">/* Now loop over all cells in box, updating distance per Thomas method */</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                bestIndex = 0;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                var colorIndex = 0;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                var xx0 = inc0;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                <span class="keywordflow">for</span> (var ic0 = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BOX_C0_ELEMS</a> - 1; ic0 &gt;= 0; ic0--)</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                    var dist1 = dist0;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                    var xx1 = inc1;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                    <span class="keywordflow">for</span> (var ic1 = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BOX_C1_ELEMS</a> - 1; ic1 &gt;= 0; ic1--)</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                    {</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                        var dist2 = dist1;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                        var xx2 = inc2;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                        <span class="keywordflow">for</span> (var ic2 = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BOX_C2_ELEMS</a> - 1; ic2 &gt;= 0; ic2--)</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                        {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                            <span class="keywordflow">if</span> (dist2 &lt; bestdist[bestIndex])</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                            {</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                                bestdist[bestIndex] = dist2;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                                bestcolor[colorIndex] = (byte)icolor;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                            }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                            dist2 += xx2;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                            xx2 += 2 * STEP_C2 * STEP_C2;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                            bestIndex++;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                            colorIndex++;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                        }</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                        dist1 += xx1;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                        xx1 += 2 * STEP_C1 * STEP_C1;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                    }</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                    dist0 += xx0;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                    xx0 += 2 * STEP_C0 * STEP_C0;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                }</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a78e148e332b3d7f0fb7539cb6bc2c612"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a></div><div class="ttdeci">internal byte [][] m_colormap</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">JpegDecompressStruct.cs:66</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a8bca3acf719ee5715936d960c9262ddc"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8bca3acf719ee5715936d960c9262ddc">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_ELEMS</a></div><div class="ttdeci">const int BOX_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00171">My2PassCQuantizer.cs:171</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a8eefc63e4fb5b77b7fdd2a1b043ac8bb"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_ELEMS</a></div><div class="ttdeci">const int BOX_C1_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00170">My2PassCQuantizer.cs:170</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a92a2da962f35cf7ec31d776f64fb5333"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a></div><div class="ttdeci">const int B_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">My2PassCQuantizer.cs:162</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa475c2f6ee5d41cd6680397cb8d93a57"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a></div><div class="ttdeci">const int R_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">My2PassCQuantizer.cs:160</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af5a5513c6f61d0d5ac255dc74e328664"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a></div><div class="ttdeci">const int G_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">My2PassCQuantizer.cs:161</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a743c6259425a2ead8d5df23305a4abaa"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a743c6259425a2ead8d5df23305a4abaa">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_ELEMS</a></div><div class="ttdeci">const int BOX_C0_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00169">My2PassCQuantizer.cs:169</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00169">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00170">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00171">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>.</p>

</div>
</div>
<a id="a25802ae74942487cd3a37aba2273c6ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25802ae74942487cd3a37aba2273c6ba">&#9670;&nbsp;</a></span>FindBiggestColorPop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBiggestColorPop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a> []&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numboxes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the splittable box with the largest color population Returns null if no splittable boxes remain </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00792">792</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordtype">long</span> maxc = 0;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            var which = -1;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="keywordflow">for</span> (var i = 0; i &lt; numboxes; i++)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <span class="keywordflow">if</span> (boxlist[i].colorcount &gt; maxc &amp;&amp; boxlist[i].volume &gt; 0)</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                    which = i;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                    maxc = boxlist[i].colorcount;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">return</span> which;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        }</div></div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00131">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.colorcount</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>.</p>

</div>
</div>
<a id="a6d239b5c7a30c67c245eb685409c2949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d239b5c7a30c67c245eb685409c2949">&#9670;&nbsp;</a></span>FindBiggestVolume()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBiggestVolume </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a> []&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numboxes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the splittable box with the largest (scaled) volume Returns null if no splittable boxes remain </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00812">812</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            var maxv = 0;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            var which = -1;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="keywordflow">for</span> (var i = 0; i &lt; numboxes; i++)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="keywordflow">if</span> (boxlist[i].volume &gt; maxv)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                    which = i;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                    maxv = boxlist[i].volume;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="keywordflow">return</span> which;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        }</div></div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00129">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.volume</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>.</p>

</div>
</div>
<a id="aa4370def69e3d03a6a776e99e540c8a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4370def69e3d03a6a776e99e540c8a2">&#9670;&nbsp;</a></span>FindNearbyColors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minc0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minc1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minc2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte []&#160;</td>
          <td class="paramname"><em>colorlist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locate the colormap entries close enough to an update box to be candidates for the nearest entry to some cell(s) in the update box. The update box is specified by the center coordinates of its first cell. The number of candidate colormap entries is returned, and their colormap indexes are placed in colorlist[]. This routine uses Heckbert's "locally sorted search" criterion to select the colors that need further consideration. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">1177</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <span class="comment">/* Compute true coordinates of update box&#39;s upper corner and center.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">             * Actually we compute the coordinates of the center of the upper-corner</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">             * histogram cell, which are the upper bounds of the volume we care about.</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">             * Note that since &quot;&gt;&gt;&quot; rounds down, the &quot;center&quot; values may be closer to</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">             * min than to max; hence comparisons to them must be &quot;&lt;=&quot;, not &quot;&lt;&quot;.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            var maxc0 = minc0 + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad28e7c493c6453a187e4c6abe4cbfabd">BOX_C0_SHIFT</a>) - (1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>));</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            var centerc0 = (minc0 + maxc0) &gt;&gt; 1;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            var maxc1 = minc1 + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aab5309a6ce089407b946484266129d51">BOX_C1_SHIFT</a>) - (1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>));</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            var centerc1 = (minc1 + maxc1) &gt;&gt; 1;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            var maxc2 = minc2 + ((1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ae21e859aa091ecfd7314878f7d022b68">BOX_C2_SHIFT</a>) - (1 &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>));</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            var centerc2 = (minc2 + maxc2) &gt;&gt; 1;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="comment">/* For each color in colormap, find:</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">             *  1. its minimum squared-distance to any point in the update box</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">             *     (zero if color is within update box);</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">             *  2. its maximum squared-distance to any point in the update box.</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">             * Both of these can be found by considering only the corners of the box.</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">             * We save the minimum distance for each color in mindist[];</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">             * only the smallest maximum distance is of interest.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            var minmaxdist = 0x7FFFFFFF;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            var mindist = <span class="keyword">new</span> <span class="keywordtype">int</span>[<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">MAXNUMCOLORS</a>];    <span class="comment">/* min distance to colormap entry i */</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="keywordflow">for</span> (var i = 0; i &lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a35f2df0300490d08bb9f805a7e41f198">actualColorCount</a>; i++)</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                <span class="comment">/* We compute the squared-c0-distance term, then add in the other two. */</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                <span class="keywordtype">int</span> x = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[0][i];</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                <span class="keywordtype">int</span> min_dist;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                <span class="keywordtype">int</span> max_dist;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                <span class="keywordflow">if</span> (x &lt; minc0)</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                    var tdist = (x - minc0) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                    min_dist = tdist * tdist;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                    tdist = (x - maxc0) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                    max_dist = tdist * tdist;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt; maxc0)</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                    var tdist = (x - maxc0) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                    min_dist = tdist * tdist;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                    tdist = (x - minc0) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                    max_dist = tdist * tdist;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                    <span class="comment">/* within cell range so no contribution to min_dist */</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                    min_dist = 0;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                    <span class="keywordflow">if</span> (x &lt;= centerc0)</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                    {</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                        var tdist = (x - maxc0) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                        max_dist = tdist * tdist;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                    }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                    {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                        var tdist = (x - minc0) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                        max_dist = tdist * tdist;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                    }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                x = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[1][i];</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                <span class="keywordflow">if</span> (x &lt; minc1)</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                    var tdist = (x - minc1) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                    min_dist += tdist * tdist;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                    tdist = (x - maxc1) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    max_dist += tdist * tdist;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt; maxc1)</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                    var tdist = (x - maxc1) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                    min_dist += tdist * tdist;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                    tdist = (x - minc1) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                    max_dist += tdist * tdist;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                    <span class="comment">/* within cell range so no contribution to min_dist */</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                    <span class="keywordflow">if</span> (x &lt;= centerc1)</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                    {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                        var tdist = (x - maxc1) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                        max_dist += tdist * tdist;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                    }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                    {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                        var tdist = (x - minc1) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                        max_dist += tdist * tdist;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                    }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                x = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[2][i];</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                <span class="keywordflow">if</span> (x &lt; minc2)</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                {</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                    var tdist = (x - minc2) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                    min_dist += tdist * tdist;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                    tdist = (x - maxc2) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    max_dist += tdist * tdist;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt; maxc2)</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                    var tdist = (x - maxc2) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                    min_dist += tdist * tdist;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                    tdist = (x - minc2) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                    max_dist += tdist * tdist;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                    <span class="comment">/* within cell range so no contribution to min_dist */</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                    <span class="keywordflow">if</span> (x &lt;= centerc2)</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                        var tdist = (x - maxc2) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                        max_dist += tdist * tdist;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                    {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                        var tdist = (x - minc2) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                        max_dist += tdist * tdist;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                    }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                mindist[i] = min_dist;  <span class="comment">/* save away the results */</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                <span class="keywordflow">if</span> (max_dist &lt; minmaxdist)</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                    minmaxdist = max_dist;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                }</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            <span class="comment">/* Now we know that no cell in the update box is more than minmaxdist</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">             * away from some colormap entry.  Therefore, only colors that are</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment">             * within minmaxdist of some part of the box need be considered.</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            var ncolors = 0;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <span class="keywordflow">for</span> (var i = 0; i &lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a35f2df0300490d08bb9f805a7e41f198">actualColorCount</a>; i++)</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            {</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <span class="keywordflow">if</span> (mindist[i] &lt;= minmaxdist)</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                {</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                    colorlist[ncolors++] = (byte)i;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                }</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            }</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <span class="keywordflow">return</span> ncolors;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a78e148e332b3d7f0fb7539cb6bc2c612"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a></div><div class="ttdeci">internal byte [][] m_colormap</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">JpegDecompressStruct.cs:66</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f13829c4370b4660ac0582dbe65948"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a></div><div class="ttdeci">const int MAXNUMCOLORS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">My2PassCQuantizer.cs:141</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aab5309a6ce089407b946484266129d51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aab5309a6ce089407b946484266129d51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_SHIFT</a></div><div class="ttdeci">const int BOX_C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00174">My2PassCQuantizer.cs:174</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a92a2da962f35cf7ec31d776f64fb5333"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a></div><div class="ttdeci">const int B_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">My2PassCQuantizer.cs:162</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a35f2df0300490d08bb9f805a7e41f198"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a35f2df0300490d08bb9f805a7e41f198">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.actualColorCount</a></div><div class="ttdeci">internal int actualColorCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00065">JpegDecompressStruct.cs:65</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa475c2f6ee5d41cd6680397cb8d93a57"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a></div><div class="ttdeci">const int R_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">My2PassCQuantizer.cs:160</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ad28e7c493c6453a187e4c6abe4cbfabd"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad28e7c493c6453a187e4c6abe4cbfabd">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_SHIFT</a></div><div class="ttdeci">const int BOX_C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00173">My2PassCQuantizer.cs:173</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ae21e859aa091ecfd7314878f7d022b68"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ae21e859aa091ecfd7314878f7d022b68">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_SHIFT</a></div><div class="ttdeci">const int BOX_C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00175">My2PassCQuantizer.cs:175</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af5a5513c6f61d0d5ac255dc74e328664"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a></div><div class="ttdeci">const int G_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">My2PassCQuantizer.cs:161</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00065">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.actualColorCount</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00173">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00174">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00175">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>.</p>

</div>
</div>
<a id="aff543b966e10331a5d03a0894d5893f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff543b966e10331a5d03a0894d5893f2">&#9670;&nbsp;</a></span>FinishPass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="../../d2/d0d/interface_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_i_jpeg_color_quantizer.html#a91bc21fc0160be980dfb06bb553d4ce9">BitMiracle.LibJpeg.Classic.Internal.IJpegColorQuantizer</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00365">365</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5ade4e08383ee5340edf9fdc00fe5c09">m_useFinishPass1</a>)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a1c433b1880a84a797075905096077456">FinishPass1</a>();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a1c433b1880a84a797075905096077456"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a1c433b1880a84a797075905096077456">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1</a></div><div class="ttdeci">void FinishPass1()</div><div class="ttdoc">Finish up at the end of each pass.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">My2PassCQuantizer.cs:607</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5ade4e08383ee5340edf9fdc00fe5c09"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5ade4e08383ee5340edf9fdc00fe5c09">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_useFinishPass1</a></div><div class="ttdeci">bool m_useFinishPass1</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00179">My2PassCQuantizer.cs:179</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00179">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_useFinishPass1</a>.</p>

</div>
</div>
<a id="a1c433b1880a84a797075905096077456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c433b1880a84a797075905096077456">&#9670;&nbsp;</a></span>FinishPass1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finish up at the end of each pass. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">607</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <span class="comment">/* Select the representative colors and fill in cinfo.colormap */</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a> = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4d42672e49b487b1b8e135a9e4ebfbc7">m_sv_colormap</a>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a67b72ad1eb8a38b650218597537865d7">SelectColors</a>(<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4a831c200381d167aa924f4ea0d6a31">m_desired</a>);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="comment">/* Force next pass to zero the color index table */</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">m_needs_zeroed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a78e148e332b3d7f0fb7539cb6bc2c612"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a></div><div class="ttdeci">internal byte [][] m_colormap</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">JpegDecompressStruct.cs:66</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac8f159830fa30d22a8d633edf17ca05b"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a></div><div class="ttdeci">bool m_needs_zeroed</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">My2PassCQuantizer.cs:190</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a4d42672e49b487b1b8e135a9e4ebfbc7"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a4d42672e49b487b1b8e135a9e4ebfbc7">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_sv_colormap</a></div><div class="ttdeci">readonly byte [][] m_sv_colormap</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00184">My2PassCQuantizer.cs:184</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa4a831c200381d167aa924f4ea0d6a31"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa4a831c200381d167aa924f4ea0d6a31">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_desired</a></div><div class="ttdeci">readonly int m_desired</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00185">My2PassCQuantizer.cs:185</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a67b72ad1eb8a38b650218597537865d7"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a67b72ad1eb8a38b650218597537865d7">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors</a></div><div class="ttdeci">void SelectColors(int desired_colors)</div><div class="ttdoc">Master routine for color selection</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">My2PassCQuantizer.cs:658</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00185">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_desired</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00184">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_sv_colormap</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00365">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass()</a>.</p>

</div>
</div>
<a id="a6e272a5213eaf85a6f5f65cde653e52b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e272a5213eaf85a6f5f65cde653e52b">&#9670;&nbsp;</a></span>InitErrorLimit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.InitErrorLimit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the error-limiting transfer function (lookup table). The raw F-S error computation can potentially compute error values of up to +- MAXJSAMPLE. But we want the maximum correction applied to a pixel to be much less, otherwise obviously wrong pixels will be created. (Typical effects include weird fringes at color-area boundaries, isolated bright pixels in a dark area, etc.) The standard advice for avoiding this problem is to ensure that the "corners" of the color cube are allocated as output colors; then repeated errors in the same direction cannot cause cascading error buildup. However, that only prevents the error from getting completely out of hand; Aaron Giles reports that error limiting improves the results even with corner colors allocated. A simple clamping of the error values to about +- MAXJSAMPLE/8 works pretty well, but the smoother transfer function used below is even better. Thanks to Aaron Giles for this idea. </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01072">1072</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[(JpegConstants.MAXJSAMPLE * 2) + 1];</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> tableOffset = JpegConstants.MAXJSAMPLE;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> STEPSIZE = ((JpegConstants.MAXJSAMPLE + 1) / 16);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <span class="comment">/* Map errors 1:1 up to +- MAXJSAMPLE/16 */</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            var output = 0;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            var input = 0;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">for</span> (; input &lt; STEPSIZE; input++, output++)</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[tableOffset + input] = output;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[tableOffset - input] = -output;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            <span class="comment">/* Map errors 1:2 up to +- 3*MAXJSAMPLE/16 */</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <span class="keywordflow">for</span> (; input &lt; STEPSIZE * 3; input++)</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[tableOffset + input] = output;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[tableOffset - input] = -output;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <span class="keywordflow">if</span> ((input &amp; 1) != 0)</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                    output++;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <span class="comment">/* Clamp the rest to final output value (which is (MAXJSAMPLE+1)/8) */</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">for</span> (; input &lt;= JpegConstants.MAXJSAMPLE; input++)</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[tableOffset + input] = output;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[tableOffset - input] = -output;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a33003b295a07de862dc309a713de6a4c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_error_limiter</a></div><div class="ttdeci">int [] m_error_limiter</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00195">My2PassCQuantizer.cs:195</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00195">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_error_limiter</a>, and <a class="el" href="../../d9/d0a/_jpeg_constants_8cs_source.html#l00122">BitMiracle.LibJpeg.Classic.JpegConstants.MAXJSAMPLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="ad66c26ca80bd22cb8cde764b2714add7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66c26ca80bd22cb8cde764b2714add7">&#9670;&nbsp;</a></span>MedianCut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a> []&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numboxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desired_colors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Repeatedly select and split the largest box until we have enough boxes </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">691</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="keywordflow">while</span> (numboxes &lt; desired_colors)</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                <span class="comment">/* Select box to split.</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">                 * Current algorithm: by population for first half, then by volume.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="keywordtype">int</span> foundIndex;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="keywordflow">if</span> (numboxes * 2 &lt;= desired_colors)</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                    foundIndex = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a25802ae74942487cd3a37aba2273c6ba">FindBiggestColorPop</a>(boxlist, numboxes);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    foundIndex = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6d239b5c7a30c67c245eb685409c2949">FindBiggestVolume</a>(boxlist, numboxes);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                <span class="keywordflow">if</span> (foundIndex == -1)     <span class="comment">/* no splittable boxes left! */</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <span class="comment">/* Copy the color bounds to the new box. */</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                boxlist[numboxes].c0max = boxlist[foundIndex].c0max;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                boxlist[numboxes].c1max = boxlist[foundIndex].c1max;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                boxlist[numboxes].c2max = boxlist[foundIndex].c2max;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                boxlist[numboxes].c0min = boxlist[foundIndex].c0min;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                boxlist[numboxes].c1min = boxlist[foundIndex].c1min;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                boxlist[numboxes].c2min = boxlist[foundIndex].c2min;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                <span class="comment">/* Choose which axis to split the box on.</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">                 * Current algorithm: longest scaled axis.</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">                 * See notes in update_box about scaling distances.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                var c0 = ((boxlist[foundIndex].c0max - boxlist[foundIndex].c0min) &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                var c1 = ((boxlist[foundIndex].c1max - boxlist[foundIndex].c1min) &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                var c2 = ((boxlist[foundIndex].c2max - boxlist[foundIndex].c2min) &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                <span class="comment">/* We want to break any ties in favor of green, then red, blue last.</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">                 * This code does the right thing for R,G,B or B,G,R color orders only.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                var cmax = c1;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                var n = 1;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                <span class="keywordflow">if</span> (c0 &gt; cmax)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                    cmax = c0;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    n = 0;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <span class="keywordflow">if</span> (c2 &gt; cmax)</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                    n = 2;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="comment">/* Choose split point along selected axis, and update box bounds.</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">                 * Current algorithm: split at halfway point.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">                 * (Since the box has been shrunk to minimum volume,</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">                 * any split will produce two nonempty subboxes.)</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">                 * Note that lb value is max for lower box, so must be &lt; old max.</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="keywordtype">int</span> lb;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <span class="keywordflow">switch</span> (n)</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                    <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                    lb = (boxlist[foundIndex].c0max + boxlist[foundIndex].c0min) / 2;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    boxlist[foundIndex].c0max = lb;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    boxlist[numboxes].c0min = lb + 1;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    lb = (boxlist[foundIndex].c1max + boxlist[foundIndex].c1min) / 2;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    boxlist[foundIndex].c1max = lb;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                    boxlist[numboxes].c1min = lb + 1;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    lb = (boxlist[foundIndex].c2max + boxlist[foundIndex].c2min) / 2;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    boxlist[foundIndex].c2max = lb;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                    boxlist[numboxes].c2min = lb + 1;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                <span class="comment">/* Update stats for boxes */</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab00e3cdc920829a1e4b4cf9316465b55">UpdateBox</a>(boxlist, foundIndex);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab00e3cdc920829a1e4b4cf9316465b55">UpdateBox</a>(boxlist, numboxes);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                numboxes++;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            <span class="keywordflow">return</span> numboxes;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a25802ae74942487cd3a37aba2273c6ba"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a25802ae74942487cd3a37aba2273c6ba">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBiggestColorPop</a></div><div class="ttdeci">static int FindBiggestColorPop(Box[] boxlist, int numboxes)</div><div class="ttdoc">Find the splittable box with the largest color population Returns null if no splittable boxes remain</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00792">My2PassCQuantizer.cs:792</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a6d239b5c7a30c67c245eb685409c2949"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6d239b5c7a30c67c245eb685409c2949">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBiggestVolume</a></div><div class="ttdeci">static int FindBiggestVolume(Box[] boxlist, int numboxes)</div><div class="ttdoc">Find the splittable box with the largest (scaled) volume Returns null if no splittable boxes remain</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00812">My2PassCQuantizer.cs:812</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab00e3cdc920829a1e4b4cf9316465b55"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab00e3cdc920829a1e4b4cf9316465b55">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox</a></div><div class="ttdeci">void UpdateBox(Box[] boxlist, int boxIndex)</div><div class="ttdoc">Shrink the min/max bounds of a box to enclose only nonzero elements, and recompute its volume and pop...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">My2PassCQuantizer.cs:832</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a92a2da962f35cf7ec31d776f64fb5333"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a></div><div class="ttdeci">const int B_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">My2PassCQuantizer.cs:162</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa475c2f6ee5d41cd6680397cb8d93a57"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a></div><div class="ttdeci">const int R_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">My2PassCQuantizer.cs:160</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af5a5513c6f61d0d5ac255dc74e328664"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a></div><div class="ttdeci">const int G_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">My2PassCQuantizer.cs:161</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00123">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c0max</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00122">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c0min</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00125">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c1max</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00124">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c1min</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00127">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c2max</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00126">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c2min</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00792">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBiggestColorPop()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00812">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBiggestVolume()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>.</p>

</div>
</div>
<a id="a2851576dd7ca23155d446365b19ba9eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2851576dd7ca23155d446365b19ba9eb">&#9670;&nbsp;</a></span>NewColorMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.NewColorMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switch to a new external colormap between output passes. </p>

<p>Implements <a class="el" href="../../d2/d0d/interface_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_i_jpeg_color_quantizer.html#af13c82f55911118faa78ba8b9870e68d">BitMiracle.LibJpeg.Classic.Internal.IJpegColorQuantizer</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00376">376</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="comment">/* Reset the inverse color map */</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">m_needs_zeroed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac8f159830fa30d22a8d633edf17ca05b"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a></div><div class="ttdeci">bool m_needs_zeroed</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">My2PassCQuantizer.cs:190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a>.</p>

</div>
</div>
<a id="aa8db3632a5ae3a65d69b0cde7013f517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8db3632a5ae3a65d69b0cde7013f517">&#9670;&nbsp;</a></span>Pass2FsDither()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>input_buf</em>[][], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>in_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>output_buf</em>[][], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>out_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map some rows of pixels to the output colormapped representation. This version performs Floyd-Steinberg dithering </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">417</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            var limit = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ad60f3df9defe67cea8643640ae9b22fe">m_sample_range_limit</a>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            var limitOffset = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a9734d85a224f5bf97ad72f8aed82e1db">m_sampleRangeLimitOffset</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordflow">for</span> (var row = 0; row &lt; num_rows; row++)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                var inputPixelIndex = 0;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                var outputPixelIndex = 0;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordtype">int</span> dir;            <span class="comment">/* +1 or -1 depending on direction */</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <span class="keywordtype">int</span> dir3;           <span class="comment">/* 3*dir, for advancing inputIndex &amp; errorIndex */</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordtype">int</span> errorIndex;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a34ed79d43928a67015eb6fcb587d6511">m_on_odd_row</a>)</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <span class="comment">/* work right to left in this row */</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    inputPixelIndex += (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">outputWidth</a> - 1) * 3;   <span class="comment">/* so point to rightmost pixel */</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    outputPixelIndex += <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">outputWidth</a> - 1;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    dir = -1;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    dir3 = -3;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    errorIndex = (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">outputWidth</a> + 1) * 3; <span class="comment">/* =&gt; entry after last column */</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a34ed79d43928a67015eb6fcb587d6511">m_on_odd_row</a> = <span class="keyword">false</span>; <span class="comment">/* flip for next time */</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    <span class="comment">/* work left to right in this row */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    dir = 1;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    dir3 = 3;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    errorIndex = 0; <span class="comment">/* =&gt; entry before first real column */</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a34ed79d43928a67015eb6fcb587d6511">m_on_odd_row</a> = <span class="keyword">true</span>; <span class="comment">/* flip for next time */</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="comment">/* Preset error values: no error propagated to first pixel from left */</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <span class="comment">/* current error or pixel value */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                var cur0 = 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                var cur1 = 0;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                var cur2 = 0;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <span class="comment">/* and no error propagated to row below yet */</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                <span class="comment">/* error for pixel below cur */</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                var belowerr0 = 0;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                var belowerr1 = 0;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                var belowerr2 = 0;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="comment">/* error for below/prev col */</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                var bpreverr0 = 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                var bpreverr1 = 0;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                var bpreverr2 = 0;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                <span class="keywordflow">for</span> (var col = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">outputWidth</a>; col &gt; 0; col--)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                    <span class="comment">/* curN holds the error propagated from the previous pixel on the</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">                     * current line.  Add the error propagated from the previous line</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">                     * to form the complete error correction term for this pixel, and</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">                     * round the error term (which is expressed * 16) to an integer.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">                     * RIGHT_SHIFT rounds towards minus infinity, so adding 8 is correct</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">                     * for either sign of the error value.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">                     * Note: errorIndex is for *previous* column&#39;s array entry.</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                    cur0 = JpegUtils.RIGHT_SHIFT(cur0 + <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex + dir3] + 8, 4);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                    cur1 = JpegUtils.RIGHT_SHIFT(cur1 + <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex + dir3 + 1] + 8, 4);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                    cur2 = JpegUtils.RIGHT_SHIFT(cur2 + <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex + dir3 + 2] + 8, 4);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                    <span class="comment">/* Limit the error using transfer function set by init_error_limit.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">                     * See comments with init_error_limit for rationale.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    cur0 = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[JpegConstants.MAXJSAMPLE + cur0];</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                    cur1 = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[JpegConstants.MAXJSAMPLE + cur1];</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    cur2 = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a>[JpegConstants.MAXJSAMPLE + cur2];</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                    <span class="comment">/* Form pixel value + error, and range-limit to 0..MAXJSAMPLE.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">                     * The maximum error is +- MAXJSAMPLE (or less with error limiting);</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">                     * this sets the required size of the range_limit array.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    cur0 += input_buf[in_row + row][inputPixelIndex];</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    cur1 += input_buf[in_row + row][inputPixelIndex + 1];</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                    cur2 += input_buf[in_row + row][inputPixelIndex + 2];</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    cur0 = limit[limitOffset + cur0];</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    cur1 = limit[limitOffset + cur1];</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    cur2 = limit[limitOffset + cur2];</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    <span class="comment">/* Index into the cache with adjusted pixel value */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    var hRow = cur0 &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    var hColumn = ((cur1 &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + (cur2 &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    <span class="comment">/* If we have not seen this color before, find nearest colormap */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                    <span class="comment">/* entry and update the cache */</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[hRow][hColumn] == 0)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                    {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                        <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a9eb7692eaf79508bbac0c5f393da4aa5">FillInverseCMap</a>(cur0 &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>, cur1 &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>, cur2 &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    <span class="comment">/* Now emit the colormap index for this cell */</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    var pixcode = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[hRow][hColumn] - 1;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                    output_buf[out_row + row][outputPixelIndex] = (byte)pixcode;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    <span class="comment">/* Compute representation error for this pixel */</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                    cur0 -= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[0][pixcode];</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    cur1 -= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[1][pixcode];</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    cur2 -= <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">m_colormap</a>[2][pixcode];</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    <span class="comment">/* Compute error fractions to be propagated to adjacent pixels.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">                     * Add these into the running sums, and simultaneously shift the</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">                     * next-line error sums left by 1 column.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    var bnexterr = cur0;    <span class="comment">/* Process component 0 */</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    var delta = cur0 * 2;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    cur0 += delta;      <span class="comment">/* form error * 3 */</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex] = (short)(bpreverr0 + cur0);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    cur0 += delta;      <span class="comment">/* form error * 5 */</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    bpreverr0 = belowerr0 + cur0;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    belowerr0 = bnexterr;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    cur0 += delta;      <span class="comment">/* form error * 7 */</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                    bnexterr = cur1;    <span class="comment">/* Process component 1 */</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    delta = cur1 * 2;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                    cur1 += delta;      <span class="comment">/* form error * 3 */</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex + 1] = (short)(bpreverr1 + cur1);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                    cur1 += delta;      <span class="comment">/* form error * 5 */</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                    bpreverr1 = belowerr1 + cur1;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    belowerr1 = bnexterr;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    cur1 += delta;      <span class="comment">/* form error * 7 */</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                    bnexterr = cur2;    <span class="comment">/* Process component 2 */</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                    delta = cur2 * 2;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    cur2 += delta;      <span class="comment">/* form error * 3 */</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex + 2] = (short)(bpreverr2 + cur2);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                    cur2 += delta;      <span class="comment">/* form error * 5 */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                    bpreverr2 = belowerr2 + cur2;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    belowerr2 = bnexterr;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                    cur2 += delta;      <span class="comment">/* form error * 7 */</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    <span class="comment">/* At this point curN contains the 7/16 error value to be propagated</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">                     * to the next pixel on the current line, and all the errors for the</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">                     * next line have been shifted over.  We are therefore ready to move on.</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                    inputPixelIndex += dir3;      <span class="comment">/* Advance pixel pointers to next column */</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    outputPixelIndex += dir;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    errorIndex += dir3;       <span class="comment">/* advance errorIndex to current column */</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                <span class="comment">/* Post-loop cleanup: we must unload the final error values into the</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">                 * final fserrors[] entry.  Note we need not unload belowerrN because</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">                 * it is for the dummy column before or after the actual array.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex] = (short)bpreverr0; <span class="comment">/* unload prev errs into array */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex + 1] = (short)bpreverr1;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>[errorIndex + 2] = (short)bpreverr2;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a78e148e332b3d7f0fb7539cb6bc2c612"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a78e148e332b3d7f0fb7539cb6bc2c612">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a></div><div class="ttdeci">internal byte [][] m_colormap</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">JpegDecompressStruct.cs:66</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_ae757612ef39652f5af7dc4baa5e913dc"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a></div><div class="ttdeci">internal int outputWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">JpegDecompressStruct.cs:54</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a9734d85a224f5bf97ad72f8aed82e1db"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a9734d85a224f5bf97ad72f8aed82e1db">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_sampleRangeLimitOffset</a></div><div class="ttdeci">internal int m_sampleRangeLimitOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00155">JpegDecompressStruct.cs:155</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac3ee29b7f1a298ee35bc62284759c1a3"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a></div><div class="ttdeci">const int HIST_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">My2PassCQuantizer.cs:153</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_ad60f3df9defe67cea8643640ae9b22fe"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ad60f3df9defe67cea8643640ae9b22fe">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_sample_range_limit</a></div><div class="ttdeci">internal byte [] m_sample_range_limit</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00154">JpegDecompressStruct.cs:154</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aeb9f4dc0abdb7bd495cc0d7a9aed7fbb"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_fserrors</a></div><div class="ttdeci">short [] m_fserrors</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00193">My2PassCQuantizer.cs:193</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a34ed79d43928a67015eb6fcb587d6511"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a34ed79d43928a67015eb6fcb587d6511">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_on_odd_row</a></div><div class="ttdeci">bool m_on_odd_row</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00194">My2PassCQuantizer.cs:194</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a33003b295a07de862dc309a713de6a4c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_error_limiter</a></div><div class="ttdeci">int [] m_error_limiter</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00195">My2PassCQuantizer.cs:195</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a9eb7692eaf79508bbac0c5f393da4aa5"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a9eb7692eaf79508bbac0c5f393da4aa5">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap</a></div><div class="ttdeci">void FillInverseCMap(int c0, int c1, int c2)</div><div class="ttdoc">Fill the inverse-colormap entries in the update box that contains histogram cell c0/c1/c2....</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">My2PassCQuantizer.cs:1414</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00066">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_colormap</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00195">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_error_limiter</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00193">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_fserrors</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00194">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_on_odd_row</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00154">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_sample_range_limit</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00155">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.m_sampleRangeLimitOffset</a>, <a class="el" href="../../d9/d0a/_jpeg_constants_8cs_source.html#l00122">BitMiracle.LibJpeg.Classic.JpegConstants.MAXJSAMPLE</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a>, and <a class="el" href="../../d6/de8/_jpeg_utils_8cs_source.html#l00121">BitMiracle.LibJpeg.Classic.Internal.JpegUtils.RIGHT_SHIFT()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00346">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ColorQuantize()</a>.</p>

</div>
</div>
<a id="a2026bbc2383648e218bfd699e64e0704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2026bbc2383648e218bfd699e64e0704">&#9670;&nbsp;</a></span>Pass2NoDither()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>input_buf</em>[][], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>in_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>output_buf</em>[][], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>out_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map some rows of pixels to the output colormapped representation. This version performs no dithering </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">567</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">for</span> (var row = 0; row &lt; num_rows; row++)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                var inRow = row + in_row;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                var inIndex = 0;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                var outIndex = 0;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                var outRow = out_row + row;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="keywordflow">for</span> (var col = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">outputWidth</a>; col &gt; 0; col--)</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                    <span class="comment">/* get pixel value and index into the cache */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    var c0 = input_buf[inRow][inIndex] &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    inIndex++;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                    var c1 = input_buf[inRow][inIndex] &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                    inIndex++;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                    var c2 = input_buf[inRow][inIndex] &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                    inIndex++;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                    var hRow = c0;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    var hColumn = (c1 * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + c2;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    <span class="comment">/* If we have not seen this color before, find nearest colormap entry */</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <span class="comment">/* and update the cache */</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[hRow][hColumn] == 0)</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                        <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a9eb7692eaf79508bbac0c5f393da4aa5">FillInverseCMap</a>(c0, c1, c2);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                    }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                    <span class="comment">/* Now emit the colormap index for this cell */</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    output_buf[outRow][outIndex] = (byte)(<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[hRow][hColumn] - 1);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    outIndex++;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_ae757612ef39652f5af7dc4baa5e913dc"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a></div><div class="ttdeci">internal int outputWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">JpegDecompressStruct.cs:54</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac3ee29b7f1a298ee35bc62284759c1a3"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a></div><div class="ttdeci">const int HIST_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">My2PassCQuantizer.cs:153</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a9eb7692eaf79508bbac0c5f393da4aa5"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a9eb7692eaf79508bbac0c5f393da4aa5">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap</a></div><div class="ttdeci">void FillInverseCMap(int c0, int c1, int c2)</div><div class="ttdoc">Fill the inverse-colormap entries in the update box that contains histogram cell c0/c1/c2....</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">My2PassCQuantizer.cs:1414</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>, and <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00346">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ColorQuantize()</a>.</p>

</div>
</div>
<a id="a4ea32b7f8dbf1b4842374025ffe67242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ea32b7f8dbf1b4842374025ffe67242">&#9670;&nbsp;</a></span>PrescanQuantize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>input_buf</em>[][], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>in_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prescan some rows of pixels. In this module the prescan simply updates the histogram, which has been initialized to zeroes by start_pass. An output_buf parameter is required by the method signature, but no data is actually output (in fact the buffer controller is probably passing a null pointer). </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">390</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">for</span> (var row = 0; row &lt; num_rows; row++)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                var inputIndex = 0;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <span class="keywordflow">for</span> (var col = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">outputWidth</a>; col &gt; 0; col--)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                    var rowIndex = input_buf[in_row + row][inputIndex] &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    var columnIndex = ((input_buf[in_row + row][inputIndex + 1] &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>)</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                        + (input_buf[in_row + row][inputIndex + 2] &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    <span class="comment">/* increment pixel value, check for overflow and undo increment if so. */</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[rowIndex][columnIndex]++;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[rowIndex][columnIndex] &lt;= 0)</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                        <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[rowIndex][columnIndex]--;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    inputIndex += 3;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_ae757612ef39652f5af7dc4baa5e913dc"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a></div><div class="ttdeci">internal int outputWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">JpegDecompressStruct.cs:54</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac3ee29b7f1a298ee35bc62284759c1a3"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a></div><div class="ttdeci">const int HIST_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">My2PassCQuantizer.cs:153</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>, and <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00346">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ColorQuantize()</a>.</p>

</div>
</div>
<a id="a67b72ad1eb8a38b650218597537865d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67b72ad1eb8a38b650218597537865d7">&#9670;&nbsp;</a></span>SelectColors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desired_colors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Master routine for color selection </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">658</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="comment">/* Allocate workspace for box list */</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            var boxlist = <span class="keyword">new</span> Box[desired_colors];</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="comment">/* Initialize one box containing whole space */</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            var numboxes = 1;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            boxlist[0].c0min = 0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            boxlist[0].c0max = JpegConstants.MAXJSAMPLE &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            boxlist[0].c1min = 0;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            boxlist[0].c1max = JpegConstants.MAXJSAMPLE &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            boxlist[0].c2min = 0;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            boxlist[0].c2max = JpegConstants.MAXJSAMPLE &gt;&gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="comment">/* Shrink it to actually-used volume and set its statistics */</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab00e3cdc920829a1e4b4cf9316465b55">UpdateBox</a>(boxlist, 0);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="comment">/* Perform median-cut to produce final box list */</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            numboxes = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad66c26ca80bd22cb8cde764b2714add7">MedianCut</a>(boxlist, numboxes, desired_colors);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="comment">/* Compute the representative color for each box, fill colormap */</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <span class="keywordflow">for</span> (var i = 0; i &lt; numboxes; i++)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac970b74f4d27fd1428f2659031772239">ComputeColor</a>(boxlist, i, i);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a35f2df0300490d08bb9f805a7e41f198">actualColorCount</a> = numboxes;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#a9000126ac0624abe11a4a7438feae2de">TraceMS</a>(1, <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">JMessageCode</a>.JTRC_QUANT_SELECTED, numboxes);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct_html_a9000126ac0624abe11a4a7438feae2de"><div class="ttname"><a href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#a9000126ac0624abe11a4a7438feae2de">BitMiracle.LibJpeg.Classic.JpegCommonStruct.TraceMS</a></div><div class="ttdeci">void TraceMS(int lvl, JMessageCode code)</div><div class="ttdoc">Shows informational and debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00306">JpegCommonStruct.cs:306</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab00e3cdc920829a1e4b4cf9316465b55"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab00e3cdc920829a1e4b4cf9316465b55">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox</a></div><div class="ttdeci">void UpdateBox(Box[] boxlist, int boxIndex)</div><div class="ttdoc">Shrink the min/max bounds of a box to enclose only nonzero elements, and recompute its volume and pop...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">My2PassCQuantizer.cs:832</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ad66c26ca80bd22cb8cde764b2714add7"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad66c26ca80bd22cb8cde764b2714add7">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut</a></div><div class="ttdeci">int MedianCut(Box[] boxlist, int numboxes, int desired_colors)</div><div class="ttdoc">Repeatedly select and split the largest box until we have enough boxes</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">My2PassCQuantizer.cs:691</a></div></div>
<div class="ttc" id="namespace_bit_miracle_1_1_lib_jpeg_1_1_classic_html_aab8bad2276ed9756ee236284df1ced9f"><div class="ttname"><a href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">BitMiracle.LibJpeg.Classic.JMessageCode</a></div><div class="ttdeci">JMessageCode</div><div class="ttdoc">Message codes used in code to signal errors, warning and trace messages.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc8/_j_message_code_8cs_source.html#l00011">JMessageCode.cs:11</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac970b74f4d27fd1428f2659031772239"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac970b74f4d27fd1428f2659031772239">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor</a></div><div class="ttdeci">void ComputeColor(Box[] boxlist, int boxIndex, int icolor)</div><div class="ttdoc">Compute representative color for a box, put it in colormap[icolor]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">My2PassCQuantizer.cs:620</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a35f2df0300490d08bb9f805a7e41f198"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a35f2df0300490d08bb9f805a7e41f198">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.actualColorCount</a></div><div class="ttdeci">internal int actualColorCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00065">JpegDecompressStruct.cs:65</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00065">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.actualColorCount</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00122">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c0min</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../d9/d0a/_jpeg_constants_8cs_source.html#l00122">BitMiracle.LibJpeg.Classic.JpegConstants.MAXJSAMPLE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, <a class="el" href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00306">BitMiracle.LibJpeg.Classic.JpegCommonStruct.TraceMS()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1()</a>.</p>

</div>
</div>
<a id="a01513c9213423b8765fd0a52682f9152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01513c9213423b8765fd0a52682f9152">&#9670;&nbsp;</a></span>StartPass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_pre_scan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize for each processing pass. </p>

<p>Implements <a class="el" href="../../d2/d0d/interface_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_i_jpeg_color_quantizer.html#a699070238fcbcaa7acaec5e43c19b9ed">BitMiracle.LibJpeg.Classic.Internal.IJpegColorQuantizer</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">268</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="comment">/* Only F-S dithering or no dithering is supported. */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">/* If user asks for ordered dither, give him F-S. */</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a14ac14e4ffbef5bdd59c206c05568246">ditherMode</a> != <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">JDitherMode</a>.JDITHER_NONE)</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a14ac14e4ffbef5bdd59c206c05568246">ditherMode</a> = <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">JDitherMode</a>.JDITHER_FS;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">if</span> (is_pre_scan)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="comment">/* Set up method pointers */</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a3484e7a3779ad8aa58b1e62c3fde61ff">m_quantizer</a> = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a>.prescan_quantizer;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5ade4e08383ee5340edf9fdc00fe5c09">m_useFinishPass1</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">m_needs_zeroed</a> = <span class="keyword">true</span>; <span class="comment">/* Always zero histogram */</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="comment">/* Set up method pointers */</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a14ac14e4ffbef5bdd59c206c05568246">ditherMode</a> == <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">JDitherMode</a>.JDITHER_FS)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a3484e7a3779ad8aa58b1e62c3fde61ff">m_quantizer</a> = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a>.pass2_fs_dither_quantizer;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a3484e7a3779ad8aa58b1e62c3fde61ff">m_quantizer</a> = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a>.pass2_no_dither_quantizer;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5ade4e08383ee5340edf9fdc00fe5c09">m_useFinishPass1</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="comment">/* Make sure color count is acceptable */</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                var i = <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a35f2df0300490d08bb9f805a7e41f198">actualColorCount</a>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">if</span> (i &lt; 1)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#ac9626d374df0f986e8e417598a612501">ErrExit</a>(<a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">JMessageCode</a>.JERR_QUANT_FEW_COLORS, 1);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordflow">if</span> (i &gt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">MAXNUMCOLORS</a>)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#ac9626d374df0f986e8e417598a612501">ErrExit</a>(<a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">JMessageCode</a>.JERR_QUANT_MANY_COLORS, <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">MAXNUMCOLORS</a>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a14ac14e4ffbef5bdd59c206c05568246">ditherMode</a> == <a class="code" href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">JDitherMode</a>.JDITHER_FS)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    <span class="comment">/* Allocate Floyd-Steinberg workspace if we didn&#39;t already. */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a> is <span class="keyword">null</span>)</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        var arraysize = (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">m_cinfo</a>.<a class="code" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">outputWidth</a> + 2) * 3;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a> = <span class="keyword">new</span> <span class="keywordtype">short</span>[arraysize];</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                    {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                        <span class="comment">/* Initialize the propagated errors to zero. */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        Array.Clear(<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>, 0, <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">m_fserrors</a>.Length);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    <span class="comment">/* Make the error-limit table if we didn&#39;t already. */</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">m_error_limiter</a> is <span class="keyword">null</span>)</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                        <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6e272a5213eaf85a6f5f65cde653e52b">InitErrorLimit</a>();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                    }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a34ed79d43928a67015eb6fcb587d6511">m_on_odd_row</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="comment">/* Zero the histogram or inverse color map, if necessary */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">m_needs_zeroed</a>)</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <span class="keywordflow">for</span> (var i = 0; i &lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ade7e716120ad35cfb7159a80d5152e23">HIST_C0_ELEMS</a>; i++)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    Array.Clear(<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[i], 0, <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[i].Length);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">m_needs_zeroed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_ae757612ef39652f5af7dc4baa5e913dc"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#ae757612ef39652f5af7dc4baa5e913dc">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a></div><div class="ttdeci">internal int outputWidth</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">JpegDecompressStruct.cs:54</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f13829c4370b4660ac0582dbe65948"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f13829c4370b4660ac0582dbe65948">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a></div><div class="ttdeci">const int MAXNUMCOLORS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">My2PassCQuantizer.cs:141</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct_html_ac9626d374df0f986e8e417598a612501"><div class="ttname"><a href="../../d4/d34/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_common_struct.html#ac9626d374df0f986e8e417598a612501">BitMiracle.LibJpeg.Classic.JpegCommonStruct.ErrExit</a></div><div class="ttdeci">void ErrExit(JMessageCode code)</div><div class="ttdoc">Used for fatal errors (print message and exit).</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00238">JpegCommonStruct.cs:238</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a3484e7a3779ad8aa58b1e62c3fde61ff"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a3484e7a3779ad8aa58b1e62c3fde61ff">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_quantizer</a></div><div class="ttdeci">QuantizerType m_quantizer</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00177">My2PassCQuantizer.cs:177</a></div></div>
<div class="ttc" id="namespace_bit_miracle_1_1_lib_jpeg_1_1_classic_html_afdd494a350f54a251aec2029ffe2af09"><div class="ttname"><a href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#afdd494a350f54a251aec2029ffe2af09">BitMiracle.LibJpeg.Classic.JDitherMode</a></div><div class="ttdeci">JDitherMode</div><div class="ttdoc">Dithering options for decompression.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dbc/_j_dither_mode_8cs_source.html#l00007">JDitherMode.cs:7</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac8f159830fa30d22a8d633edf17ca05b"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac8f159830fa30d22a8d633edf17ca05b">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a></div><div class="ttdeci">bool m_needs_zeroed</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">My2PassCQuantizer.cs:190</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ade7e716120ad35cfb7159a80d5152e23"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ade7e716120ad35cfb7159a80d5152e23">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C0_ELEMS</a></div><div class="ttdeci">const int HIST_C0_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00151">My2PassCQuantizer.cs:151</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ab393fee31404454bfedde156f23a124f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab393fee31404454bfedde156f23a124f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a></div><div class="ttdeci">readonly JpegDecompressStruct m_cinfo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">My2PassCQuantizer.cs:181</a></div></div>
<div class="ttc" id="namespace_bit_miracle_1_1_lib_jpeg_1_1_classic_html_aab8bad2276ed9756ee236284df1ced9f"><div class="ttname"><a href="../../db/daf/namespace_bit_miracle_1_1_lib_jpeg_1_1_classic.html#aab8bad2276ed9756ee236284df1ced9f">BitMiracle.LibJpeg.Classic.JMessageCode</a></div><div class="ttdeci">JMessageCode</div><div class="ttdoc">Message codes used in code to signal errors, warning and trace messages.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc8/_j_message_code_8cs_source.html#l00011">JMessageCode.cs:11</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aeb9f4dc0abdb7bd495cc0d7a9aed7fbb"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_fserrors</a></div><div class="ttdeci">short [] m_fserrors</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00193">My2PassCQuantizer.cs:193</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a6e272a5213eaf85a6f5f65cde653e52b"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a6e272a5213eaf85a6f5f65cde653e52b">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.InitErrorLimit</a></div><div class="ttdeci">void InitErrorLimit()</div><div class="ttdoc">Initialize the error-limiting transfer function (lookup table). The raw F-S error computation can pot...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01072">My2PassCQuantizer.cs:1072</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a34ed79d43928a67015eb6fcb587d6511"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a34ed79d43928a67015eb6fcb587d6511">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_on_odd_row</a></div><div class="ttdeci">bool m_on_odd_row</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00194">My2PassCQuantizer.cs:194</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a33003b295a07de862dc309a713de6a4c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a33003b295a07de862dc309a713de6a4c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_error_limiter</a></div><div class="ttdeci">int [] m_error_limiter</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00195">My2PassCQuantizer.cs:195</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a926cf6f7aa09e03093919501da6d77bc"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.QuantizerType</a></div><div class="ttdeci">QuantizerType</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00134">My2PassCQuantizer.cs:134</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a35f2df0300490d08bb9f805a7e41f198"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a35f2df0300490d08bb9f805a7e41f198">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.actualColorCount</a></div><div class="ttdeci">internal int actualColorCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00065">JpegDecompressStruct.cs:65</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct_html_a14ac14e4ffbef5bdd59c206c05568246"><div class="ttname"><a href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html#a14ac14e4ffbef5bdd59c206c05568246">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.ditherMode</a></div><div class="ttdeci">internal JDitherMode ditherMode</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00047">JpegDecompressStruct.cs:47</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5ade4e08383ee5340edf9fdc00fe5c09"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5ade4e08383ee5340edf9fdc00fe5c09">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_useFinishPass1</a></div><div class="ttdeci">bool m_useFinishPass1</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00179">My2PassCQuantizer.cs:179</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00065">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.actualColorCount</a>, <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00047">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.ditherMode</a>, <a class="el" href="../../dd/dac/_jpeg_common_struct_8cs_source.html#l00238">BitMiracle.LibJpeg.Classic.JpegCommonStruct.ErrExit()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00151">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C0_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01072">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.InitErrorLimit()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00195">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_error_limiter</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00193">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_fserrors</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00194">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_on_odd_row</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_quantizer</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00179">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_useFinishPass1</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS</a>, and <a class="el" href="../../d7/d87/_jpeg_decompress_struct_8cs_source.html#l00054">BitMiracle.LibJpeg.Classic.JpegDecompressStruct.outputWidth</a>.</p>

</div>
</div>
<a id="ab00e3cdc920829a1e4b4cf9316465b55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab00e3cdc920829a1e4b4cf9316465b55">&#9670;&nbsp;</a></span>UpdateBox()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/struct_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_1_1_box.html">Box</a> []&#160;</td>
          <td class="paramname"><em>boxlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>boxIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shrink the min/max bounds of a box to enclose only nonzero elements, and recompute its volume and population </p>

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">832</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            var curBox = boxlist[boxIndex];</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            var have_c0min = <span class="keyword">false</span>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="keywordflow">if</span> (curBox.c0max &gt; curBox.c0min)</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                <span class="keywordflow">for</span> (var c0 = curBox.c0min; c0 &lt;= curBox.c0max; c0++)</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                    <span class="keywordflow">for</span> (var c1 = curBox.c1min; c1 &lt;= curBox.c1max; c1++)</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                        var histogramIndex = (c1 * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + curBox.c2min;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                        for (var c2 = curBox.c2min; c2 &lt;= curBox.c2max; c2++)</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                        {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex++] != 0)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                            {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                                curBox.c0min = c0;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                                have_c0min = <span class="keyword">true</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                            }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                        }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                        <span class="keywordflow">if</span> (have_c0min)</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                        {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                        }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                    }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    <span class="keywordflow">if</span> (have_c0min)</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                    {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                    }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            var have_c0max = <span class="keyword">false</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="keywordflow">if</span> (curBox.c0max &gt; curBox.c0min)</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                <span class="keywordflow">for</span> (var c0 = curBox.c0max; c0 &gt;= curBox.c0min; c0--)</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                    <span class="keywordflow">for</span> (var c1 = curBox.c1min; c1 &lt;= curBox.c1max; c1++)</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                    {</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                        var histogramIndex = (c1 * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + curBox.c2min;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                        for (var c2 = curBox.c2min; c2 &lt;= curBox.c2max; c2++)</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                        {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex++] != 0)</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                            {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                                curBox.c0max = c0;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                                have_c0max = <span class="keyword">true</span>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                            }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                        }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                        <span class="keywordflow">if</span> (have_c0max)</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                        }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                    }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                    <span class="keywordflow">if</span> (have_c0max)</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                    {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                    }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            var have_c1min = <span class="keyword">false</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <span class="keywordflow">if</span> (curBox.c1max &gt; curBox.c1min)</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                <span class="keywordflow">for</span> (var c1 = curBox.c1min; c1 &lt;= curBox.c1max; c1++)</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    <span class="keywordflow">for</span> (var c0 = curBox.c0min; c0 &lt;= curBox.c0max; c0++)</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                        var histogramIndex = (c1 * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + curBox.c2min;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                        for (var c2 = curBox.c2min; c2 &lt;= curBox.c2max; c2++)</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                        {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex++] != 0)</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                            {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                                curBox.c1min = c1;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                                have_c1min = <span class="keyword">true</span>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                            }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                        }</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                        <span class="keywordflow">if</span> (have_c1min)</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                        {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                        }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                    }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                    <span class="keywordflow">if</span> (have_c1min)</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                    {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            var have_c1max = <span class="keyword">false</span>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            <span class="keywordflow">if</span> (curBox.c1max &gt; curBox.c1min)</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                <span class="keywordflow">for</span> (var c1 = curBox.c1max; c1 &gt;= curBox.c1min; c1--)</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                    <span class="keywordflow">for</span> (var c0 = curBox.c0min; c0 &lt;= curBox.c0max; c0++)</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                    {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                        var histogramIndex = (c1 * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + curBox.c2min;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                        for (var c2 = curBox.c2min; c2 &lt;= curBox.c2max; c2++)</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                        {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex++] != 0)</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                            {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                                curBox.c1max = c1;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                                have_c1max = <span class="keyword">true</span>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                            }</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                        }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                        <span class="keywordflow">if</span> (have_c1max)</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                        }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                    }</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                    <span class="keywordflow">if</span> (have_c1max)</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                    {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                    }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            }</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            var have_c2min = <span class="keyword">false</span>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="keywordflow">if</span> (curBox.c2max &gt; curBox.c2min)</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                <span class="keywordflow">for</span> (var c2 = curBox.c2min; c2 &lt;= curBox.c2max; c2++)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                    <span class="keywordflow">for</span> (var c0 = curBox.c0min; c0 &lt;= curBox.c0max; c0++)</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                        var histogramIndex = (curBox.c1min * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + c2;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                        <span class="keywordflow">for</span> (var c1 = curBox.c1min; c1 &lt;= curBox.c1max; c1++, histogramIndex += <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>)</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                        {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex] != 0)</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                            {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                                curBox.c2min = c2;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                                have_c2min = <span class="keyword">true</span>;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                            }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                        <span class="keywordflow">if</span> (have_c2min)</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                        {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                        }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                    }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                    <span class="keywordflow">if</span> (have_c2min)</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                    {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            var have_c2max = <span class="keyword">false</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="keywordflow">if</span> (curBox.c2max &gt; curBox.c2min)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                <span class="keywordflow">for</span> (var c2 = curBox.c2max; c2 &gt;= curBox.c2min; c2--)</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                    <span class="keywordflow">for</span> (var c0 = curBox.c0min; c0 &lt;= curBox.c0max; c0++)</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                        var histogramIndex = (curBox.c1min * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + c2;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                        <span class="keywordflow">for</span> (var c1 = curBox.c1min; c1 &lt;= curBox.c1max; c1++, histogramIndex += <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>)</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                        {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex] != 0)</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                            {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                curBox.c2max = c2;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                have_c2max = <span class="keyword">true</span>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                            }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                        }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                        <span class="keywordflow">if</span> (have_c2max)</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                        {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                        }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                    }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                    <span class="keywordflow">if</span> (have_c2max)</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                    {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                    }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <span class="comment">/* Update box volume.</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">             * We use 2-norm rather than real volume here; this biases the method</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">             * against making long narrow boxes, and it has the side benefit that</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">             * a box is splittable iff norm &gt; 0.</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">             * Since the differences are expressed in histogram-cell units,</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">             * we have to shift back to byte units to get consistent distances;</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">             * after which, we scale according to the selected distance scale factors.</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            var dist0 = ((curBox.c0max - curBox.c0min) &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">R_SCALE</a>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            var dist1 = ((curBox.c1max - curBox.c1min) &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">G_SCALE</a>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            var dist2 = ((curBox.c2max - curBox.c2min) &lt;&lt; <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a>) * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">B_SCALE</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            curBox.volume = (dist0 * dist0) + (dist1 * dist1) + (dist2 * dist2);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="comment">/* Now scan remaining volume of box and compute population */</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordtype">long</span> ccount = 0;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">for</span> (var c0 = curBox.c0min; c0 &lt;= curBox.c0max; c0++)</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keywordflow">for</span> (var c1 = curBox.c1min; c1 &lt;= curBox.c1max; c1++)</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                    var histogramIndex = (c1 * <a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">HIST_C2_ELEMS</a>) + curBox.c2min;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                    for (var c2 = curBox.c2min; c2 &lt;= curBox.c2max; c2++, histogramIndex++)</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                    {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">m_histogram</a>[c0][histogramIndex] != 0)</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                        {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                            ccount++;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                        }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            curBox.colorcount = ccount;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            boxlist[boxIndex] = curBox;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        }</div><div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a5cbff41160f266164b584254c96d3b51"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a></div><div class="ttdeci">const int C1_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">My2PassCQuantizer.cs:157</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a11f7c7fbd2f211d02e0bd908c8a7242c"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a11f7c7fbd2f211d02e0bd908c8a7242c">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a></div><div class="ttdeci">readonly ushort [][] m_histogram</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">My2PassCQuantizer.cs:188</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_ac3ee29b7f1a298ee35bc62284759c1a3"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ac3ee29b7f1a298ee35bc62284759c1a3">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a></div><div class="ttdeci">const int HIST_C2_ELEMS</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">My2PassCQuantizer.cs:153</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa51789295718b3442c46a30da1d60b9d"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a></div><div class="ttdeci">const int C2_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">My2PassCQuantizer.cs:158</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_a92a2da962f35cf7ec31d776f64fb5333"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a92a2da962f35cf7ec31d776f64fb5333">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a></div><div class="ttdeci">const int B_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">My2PassCQuantizer.cs:162</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_aa475c2f6ee5d41cd6680397cb8d93a57"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa475c2f6ee5d41cd6680397cb8d93a57">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a></div><div class="ttdeci">const int R_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">My2PassCQuantizer.cs:160</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af70bff91e9e294d1fb2ec77f6de0cb5f"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a></div><div class="ttdeci">const int C0_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">My2PassCQuantizer.cs:156</a></div></div>
<div class="ttc" id="class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer_html_af5a5513c6f61d0d5ac255dc74e328664"><div class="ttname"><a href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af5a5513c6f61d0d5ac255dc74e328664">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a></div><div class="ttdeci">const int G_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">My2PassCQuantizer.cs:161</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00126">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Box.c2min</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a92a2da962f35cf7ec31d776f64fb5333"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92a2da962f35cf7ec31d776f64fb5333">&#9670;&nbsp;</a></span>B_SCALE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.B_SCALE = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00162">162</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<a id="a743c6259425a2ead8d5df23305a4abaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a743c6259425a2ead8d5df23305a4abaa">&#9670;&nbsp;</a></span>BOX_C0_ELEMS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_ELEMS = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BOX_C0_LOG</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00169">169</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>.</p>

</div>
</div>
<a id="a554afa7e9e99af64c19ca4daeaa28e34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a554afa7e9e99af64c19ca4daeaa28e34">&#9670;&nbsp;</a></span>BOX_C0_LOG</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_LOG = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a643ee6dc79ec344da721746786e3a451">HIST_C0_BITS</a> - 3)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00165">165</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>.</p>

</div>
</div>
<a id="ad28e7c493c6453a187e4c6abe4cbfabd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28e7c493c6453a187e4c6abe4cbfabd">&#9670;&nbsp;</a></span>BOX_C0_SHIFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C0_SHIFT = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af70bff91e9e294d1fb2ec77f6de0cb5f">C0_SHIFT</a> + <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a554afa7e9e99af64c19ca4daeaa28e34">BOX_C0_LOG</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00173">173</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>.</p>

</div>
</div>
<a id="a8eefc63e4fb5b77b7fdd2a1b043ac8bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eefc63e4fb5b77b7fdd2a1b043ac8bb">&#9670;&nbsp;</a></span>BOX_C1_ELEMS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_ELEMS = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BOX_C1_LOG</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00170">170</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>.</p>

</div>
</div>
<a id="ab864a7d4031b001e0a74680b63d56cb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab864a7d4031b001e0a74680b63d56cb1">&#9670;&nbsp;</a></span>BOX_C1_LOG</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_LOG = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad56ff05f095ee2cf9f8ef8fb43926449">HIST_C1_BITS</a> - 3)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00166">166</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>.</p>

</div>
</div>
<a id="aab5309a6ce089407b946484266129d51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab5309a6ce089407b946484266129d51">&#9670;&nbsp;</a></span>BOX_C1_SHIFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C1_SHIFT = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a5cbff41160f266164b584254c96d3b51">C1_SHIFT</a> + <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ab864a7d4031b001e0a74680b63d56cb1">BOX_C1_LOG</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00174">174</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>.</p>

</div>
</div>
<a id="a8bca3acf719ee5715936d960c9262ddc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bca3acf719ee5715936d960c9262ddc">&#9670;&nbsp;</a></span>BOX_C2_ELEMS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_ELEMS = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BOX_C2_LOG</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00171">171</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>.</p>

</div>
</div>
<a id="af706d02b121bde838f13ff27fd5f8254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af706d02b121bde838f13ff27fd5f8254">&#9670;&nbsp;</a></span>BOX_C2_LOG</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_LOG = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a50f6f5c91111779c8540a8d072d65bb7">HIST_C2_BITS</a> - 3)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00167">167</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>.</p>

</div>
</div>
<a id="ae21e859aa091ecfd7314878f7d022b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae21e859aa091ecfd7314878f7d022b68">&#9670;&nbsp;</a></span>BOX_C2_SHIFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.BOX_C2_SHIFT = (<a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#aa51789295718b3442c46a30da1d60b9d">C2_SHIFT</a> + <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#af706d02b121bde838f13ff27fd5f8254">BOX_C2_LOG</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00175">175</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>.</p>

</div>
</div>
<a id="af70bff91e9e294d1fb2ec77f6de0cb5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70bff91e9e294d1fb2ec77f6de0cb5f">&#9670;&nbsp;</a></span>C0_SHIFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C0_SHIFT = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a46a401a8a3a1cbe0d8b640b1aa5d0de3">JpegConstants.BITS_IN_JSAMPLE</a> - <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a643ee6dc79ec344da721746786e3a451">HIST_C0_BITS</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00156">156</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<a id="a5cbff41160f266164b584254c96d3b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cbff41160f266164b584254c96d3b51">&#9670;&nbsp;</a></span>C1_SHIFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C1_SHIFT = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a46a401a8a3a1cbe0d8b640b1aa5d0de3">JpegConstants.BITS_IN_JSAMPLE</a> - <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad56ff05f095ee2cf9f8ef8fb43926449">HIST_C1_BITS</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00157">157</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<a id="aa51789295718b3442c46a30da1d60b9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa51789295718b3442c46a30da1d60b9d">&#9670;&nbsp;</a></span>C2_SHIFT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.C2_SHIFT = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a46a401a8a3a1cbe0d8b640b1aa5d0de3">JpegConstants.BITS_IN_JSAMPLE</a> - <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a50f6f5c91111779c8540a8d072d65bb7">HIST_C2_BITS</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00158">158</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<a id="af5a5513c6f61d0d5ac255dc74e328664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a5513c6f61d0d5ac255dc74e328664">&#9670;&nbsp;</a></span>G_SCALE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.G_SCALE = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00161">161</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<a id="a643ee6dc79ec344da721746786e3a451"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a643ee6dc79ec344da721746786e3a451">&#9670;&nbsp;</a></span>HIST_C0_BITS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C0_BITS = 5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00146">146</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

</div>
</div>
<a id="ade7e716120ad35cfb7159a80d5152e23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade7e716120ad35cfb7159a80d5152e23">&#9670;&nbsp;</a></span>HIST_C0_ELEMS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C0_ELEMS = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a643ee6dc79ec344da721746786e3a451">HIST_C0_BITS</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00151">151</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="ad56ff05f095ee2cf9f8ef8fb43926449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad56ff05f095ee2cf9f8ef8fb43926449">&#9670;&nbsp;</a></span>HIST_C1_BITS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C1_BITS = 6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00147">147</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

</div>
</div>
<a id="a63438b3a466975b2e1b40ab6251e3ddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63438b3a466975b2e1b40ab6251e3ddf">&#9670;&nbsp;</a></span>HIST_C1_ELEMS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C1_ELEMS = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#ad56ff05f095ee2cf9f8ef8fb43926449">HIST_C1_BITS</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00152">152</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>.</p>

</div>
</div>
<a id="a50f6f5c91111779c8540a8d072d65bb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50f6f5c91111779c8540a8d072d65bb7">&#9670;&nbsp;</a></span>HIST_C2_BITS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_BITS = 5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00148">148</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

</div>
</div>
<a id="ac3ee29b7f1a298ee35bc62284759c1a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3ee29b7f1a298ee35bc62284759c1a3">&#9670;&nbsp;</a></span>HIST_C2_ELEMS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.HIST_C2_ELEMS = (1 &lt;&lt; <a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a50f6f5c91111779c8540a8d072d65bb7">HIST_C2_BITS</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00153">153</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<a id="ab393fee31404454bfedde156f23a124f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab393fee31404454bfedde156f23a124f">&#9670;&nbsp;</a></span>m_cinfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="../../d7/d05/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_decompress_struct.html">JpegDecompressStruct</a> BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_cinfo</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00181">181</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00346">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ColorQuantize()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00658">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.SelectColors()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="aa4a831c200381d167aa924f4ea0d6a31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4a831c200381d167aa924f4ea0d6a31">&#9670;&nbsp;</a></span>m_desired</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_desired</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00185">185</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>.</p>

</div>
</div>
<a id="a33003b295a07de862dc309a713de6a4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33003b295a07de862dc309a713de6a4c">&#9670;&nbsp;</a></span>m_error_limiter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int [] BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_error_limiter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00195">195</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01072">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.InitErrorLimit()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="aeb9f4dc0abdb7bd495cc0d7a9aed7fbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb9f4dc0abdb7bd495cc0d7a9aed7fbb">&#9670;&nbsp;</a></span>m_fserrors</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">short [] BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_fserrors</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00193">193</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="a11f7c7fbd2f211d02e0bd908c8a7242c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11f7c7fbd2f211d02e0bd908c8a7242c">&#9670;&nbsp;</a></span>m_histogram</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ushort [][] BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_histogram</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00188">188</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00620">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ComputeColor()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00567">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2NoDither()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00390">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.PrescanQuantize()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<a id="ac8f159830fa30d22a8d633edf17ca05b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8f159830fa30d22a8d633edf17ca05b">&#9670;&nbsp;</a></span>m_needs_zeroed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_needs_zeroed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00190">190</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00376">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.NewColorMap()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="a34ed79d43928a67015eb6fcb587d6511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ed79d43928a67015eb6fcb587d6511">&#9670;&nbsp;</a></span>m_on_odd_row</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_on_odd_row</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00194">194</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00417">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.Pass2FsDither()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="a3484e7a3779ad8aa58b1e62c3fde61ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3484e7a3779ad8aa58b1e62c3fde61ff">&#9670;&nbsp;</a></span>m_quantizer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d08/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_internal_1_1_my2_pass_c_quantizer.html#a926cf6f7aa09e03093919501da6d77bc">QuantizerType</a> BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_quantizer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00177">177</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00346">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.ColorQuantize()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="a4d42672e49b487b1b8e135a9e4ebfbc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d42672e49b487b1b8e135a9e4ebfbc7">&#9670;&nbsp;</a></span>m_sv_colormap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly byte [][] BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_sv_colormap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00184">184</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00607">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass1()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>.</p>

</div>
</div>
<a id="a5ade4e08383ee5340edf9fdc00fe5c09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ade4e08383ee5340edf9fdc00fe5c09">&#9670;&nbsp;</a></span>m_useFinishPass1</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.m_useFinishPass1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00179">179</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00365">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FinishPass()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="a11f13829c4370b4660ac0582dbe65948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11f13829c4370b4660ac0582dbe65948">&#9670;&nbsp;</a></span>MAXNUMCOLORS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MAXNUMCOLORS = (<a class="el" href="../../d0/dbd/class_bit_miracle_1_1_lib_jpeg_1_1_classic_1_1_jpeg_constants.html#a62e5231b58de0febd2f19654ff6cbf87">JpegConstants.MAXJSAMPLE</a> + 1)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00141">141</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01414">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FillInverseCMap()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00200">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.My2PassCQuantizer()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00268">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.StartPass()</a>.</p>

</div>
</div>
<a id="aa475c2f6ee5d41cd6680397cb8d93a57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa475c2f6ee5d41cd6680397cb8d93a57">&#9670;&nbsp;</a></span>R_SCALE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.R_SCALE = 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00160">160</a> of file <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01332">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindBestColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l01177">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.FindNearbyColors()</a>, <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00691">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.MedianCut()</a>, and <a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html#l00832">BitMiracle.LibJpeg.Classic.Internal.My2PassCQuantizer.UpdateBox()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/smcbeth.DLS-INC/Projects/Yarrow/Juniper/src/Juniper.Client/ThirdParty/LibJpeg.NET/Classic/Internal/<a class="el" href="../../da/d03/_my2_pass_c_quantizer_8cs_source.html">My2PassCQuantizer.cs</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
