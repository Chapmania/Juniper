<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/png" href="favicon.png">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta charset="utf-8">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="theme-color" content="black">
<meta name="description" content="Juniper: Cross-platform VR and AR Framework">
<meta name="keywords" content=".NET, C#, units of measure, conversion, open source software, MIT License">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@Sean_McBeth">
<meta property="og:site_name" content="Juniper">
<meta property="og:description" content="Juniper: Cross-platform VR and AR Framework">
<meta name="twitter:description" content="Juniper: Cross-platform VR and AR Framework">
<meta property="og:url" content="https://capnmidnight.github.io/Juniper">
<meta name="twitter:image" content="http://capnmidnight.github.io/Juniper/$logo">
<meta property="og:image" content="http://capnmidnight.github.io/Juniper/$logo">
<meta property="og:title" content="Juniper: Juniper For Fun and Profit">
<meta name="twitter:title" content="Juniper: Juniper For Fun and Profit">
<title>Juniper: Juniper For Fun and Profit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <a href="https://github.com/capnmidnight/Juniper" style="position:absolute;right:0;top:0"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_orange_ff7600.png?resize=149%2C149" alt="Fork me on GitHub" data-recalc-dims="1"></a>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <a id="projectlogo" href="https://www.github.com/capnmidnight/Juniper" target="_blank" rel="noopener" title="Project repository"><img alt="Logo" src="logo.png"/></a>
  <div id="projectalign">
  	<a id="projectname" href="https://www.github.com/capnmidnight/Juniper" target="_blank" rel="noopener" title="Project repository">Juniper</a>
   	<div id="projectbrief">Cross-platform VR and AR Framework</div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="de/d75/namespace_juniper.html">Juniper</a> For Fun and Profit </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md17">Introduction</a></li>
<li class="level1"><a href="#autotoc_md18">Setup</a><ul><li class="level2"><a href="#autotoc_md19">Installation</a></li>
<li class="level2"><a href="#autotoc_md20">Project Integration</a></li>
<li class="level2"><a href="#autotoc_md21">Configuration</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md22">Development</a><ul><li class="level2"><a href="#autotoc_md23">Tools</a></li>
<li class="level2"><a href="#autotoc_md24">Debugging</a></li>
<li class="level2"><a href="#autotoc_md25">Platform Notes</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md26">Code Metrics</a><ul><li class="level2"><a href="#autotoc_md27">Juniper</a></li>
<li class="level2"><a href="#autotoc_md28">Juniper.Unity</a></li>
<li class="level2"><a href="#autotoc_md29">Juniper.Units</a></li>
<li class="level2"><a href="#autotoc_md30">Juniper.NeuroSky</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md17"></a>
Introduction</h1>
<p><a class="el" href="de/d75/namespace_juniper.html">Juniper</a> is a framework within Unity 3D for managing and developing virtual, augmented, and mixed reality applications, within the context of a metaphor of the human body. It provides the following sub-modules:</p>
<ul>
<li><em>Data</em> - Managing HTTP requests and streaming assets, all from background threads that do not lock up the main UI thread.</li>
<li><em>Ground</em> - Terrain rendering and AR surface reconstruction base code.</li>
<li><em>ImageTracking</em> - Image-marker tracking base code.</li>
<li><em>Input</em> - Base-code for handling user input.</li>
<li><em>NeuroSky</em> - Wrapper code for handling <a href="https://store.neurosky.com/pages/mindwave">the NeuroSky MindWave device</a>.</li>
<li><em>Progress</em> - Interfaces for representing progress meters.</li>
<li><em>Statistics</em> - Collections that perform statistical analysis on their contents.</li>
<li><em>Units</em> - Conversions between and formattings of values tagged with units of measure.</li>
<li><em>Unity</em> - Components and implementations for the Unity platform.<ul>
<li><em>Anchoring</em> - Components for fixing objects in space, with persistence on AR platforms.</li>
<li><em>Animation</em> - Basic animations on specific, common object properties, without having to engage the full power of Mecanim.</li>
<li><em>Audio</em> - Audio management and effects components.</li>
<li><em>Collections</em> - Unity-specific collection manipulation code.</li>
<li><em>Display</em> - Components for managing VR and AR display modes.</li>
<li><em>Events</em> - Custom UnityEvent classes that pass a few primitive values as event arguments.</li>
<li><em>Ground</em> - Concrete implementations of AR surface reconstruction and terrain rendering.</li>
<li><em>Haptics</em> - Components for performing high-quality haptic feedback on systems that support it.</li>
<li><em>ImageTracking</em> - Concrete implementations for platform-specific marker tracking.</li>
<li><em>Imaging</em> - Loading and processing PNG and raw images.</li>
<li><em>Input</em> - Handling user input: keyboard, mouse, touch, motion controllers, and speech.</li>
<li><em>LightMapping</em> - Swapping light map sets at runtime to have different, baked lighting conditions without switching scenes.</li>
<li><em>Progress</em> - Implementations of the IProgress interface for use in Unity experiences.</li>
<li><em>Statistics</em> - Statistical analysis collections for Unity's Vector structures.</li>
<li><em>Widgets</em> - Visual elements with which the user may interact.</li>
<li><em>World</em> - Components for understanding and integrating with the real world: light estimation, global positioning, translating between spatial reference systems, receiving weather reports.</li>
</ul>
</li>
<li><em>UnityEditor</em> - Components that run in the UnityEditor itself, with custom editors for a few of <a class="el" href="de/d75/namespace_juniper.html">Juniper</a>'s components.<ul>
<li><em>ConfigurationManagement</em> - Listings of VR and AR platforms, their dependencies, and a dependency manager for automatically converting Unity projects between different platforms.</li>
</ul>
</li>
<li><em>World</em> - Physical world units and data.<ul>
<li><em>Climate</em> - Code relating to weather reporting.<ul>
<li><em>OpenWeatherMap</em> - Service integration for <a href="https://openweathermap.org/">OpenWeatherMap</a>'s API.</li>
</ul>
</li>
<li><em>GIS</em> - Latitude/Longitude points and conversions to different coordinate frames. </li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md18"></a>
Setup</h1>
<h2><a class="anchor" id="autotoc_md19"></a>
Installation</h2>
<p>There are two ways to install <a class="el" href="de/d75/namespace_juniper.html">Juniper</a>.</p>
<ul>
<li><a href="Juniper.unitypackage">Download the UnityPackage</a> and install it in your project, or</li>
<li><a href="https://github.com/capnmidnight/Juniper">Clone the repository</a> and copy the contents of the <code>Package</code> directory to your Assets folder in a directory named <code><a class="el" href="de/d75/namespace_juniper.html">Juniper</a></code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
Project Integration</h2>
<p>There are a number of different components that go into configuring a <a class="el" href="de/d75/namespace_juniper.html">Juniper</a> application:</p>
<ul>
<li>The AR or VR subsystem needs to be setup for use.</li>
<li>The EventSystem needs to be configured,<ul>
<li>along with an InputModuel that understands different types of 3D pointers, and,</li>
<li>those pointers appropriate for the XR subsystem.</li>
</ul>
</li>
<li>The user-interface interaction feedback audio system, which includes haptic feedback.</li>
<li>A manager for AR targets, if they are being used.</li>
<li>Mouse and Keyboard movement for use in the Editor.</li>
<li>A camera configuration that,<ul>
<li>updates the clear flags when switching between types of XR subsystems, and</li>
<li>reduces rendering quality to keep the target frame-rate as close to the native display refresh rate as possible.</li>
</ul>
</li>
<li>And, a graphical component for fading views in and out during scene transitions and other long, blocking operations, so the user doesn't see the camera locked in place.</li>
</ul>
<p>To that end, there is a Prefab that has most of this pre-configured, requiring only project-specific configuration once included in the project. It is located at </p><pre class="fragment">Juniper/Prefabs/UserRig.prefab
</pre><p>The prefab contains the following GameObjects and Components:</p>
<ul>
<li><b>[GO] UserRig</b>: The root of the prefab<ul>
<li><em>[CMP] XRSystem</em>: manages system configuration and AR/VR feature sets.</li>
<li><em>[CMP] EventSystem</em>: Unity's EventSystem component for triggering pointer events.</li>
<li><em>[CMP] UnifiedInputModule</em>: A custom InputModule that fuses a variety of different pointers between the computer mouse, the touch screen, and any potential motion controllers or hand tracking systems connected to the application.</li>
<li><em>[CMP] Mouse</em>: The mouse pointer, mostly only used in the Editor.</li>
<li><em>[CMP] Touches</em>: Invisible pointers for each finger.</li>
<li><em>[CMP] TrackerKeeper</em>: A top-level manager for AR image targets, with event handlers for a variety of different scenarios in managing the AR experience.</li>
<li><em>[CMP] R2D2</em>: Configuration setting for different audio clips to playback during different types of user interactions in the system. This also provides haptic feedback for most of the interaction types.</li>
<li><b>[GO] Stage</b>: The immediate area around the user, separate from the camera. Keyboard/GamePad movement, or VR teleportation will move the stage instead of the camera. Moving the camera is reserved for the XR subsystem, to maintain the right view angle for the user.<ul>
<li><em>[CMP] KeyboardMovement</em>: Moves the stage with Unity's configured keyboard movement keys in the direction the camera is looking. Mostly only used in the Editor for testing.</li>
<li><b>[GO] Camera</b>: The main camera.<ul>
<li><em>[CMP] Camera</em>: The main camera component. You may want to configure the Clipping Planes. Do not change the Field of View, as it will be ignored and recomputed at runtime for the specific XR subsystem.</li>
<li><em>[CMP] CameraExtensions</em>: Manages camera attributes like camera FOV.</li>
<li><em>[CMP] QualityDegrader</em>: Projects start out at the highest quality setting and degrade through the quality settings enabled in the Editor until either there are no more quality setting to go through or the app consistently hits 60FPS.</li>
<li><em>[CMP] PhysicsRaycaster</em>: The raycaster used for all pointers that fire through the main camera, including the Moues and Touches.</li>
<li><b>[GO] Fader</b>: A box that sits around the user's head for fading the camera view in and out in a way that works on all XR subsystems.<ul>
<li><em>[CMP] Darth</em>: Darth Fader is the component that manages fading of the camera view. You can retrieve Darth Fader and use it to fade out the screen if you ever have any long, blocking operations that could lock up the camera.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md21"></a>
Configuration</h2>
<p>Once you have the UserRig prefab in your scene, select the UserRig game object and find the XRSystem component. Pay the most attention to the highlighted fields:</p>
<img src="XRSystemSettings.png" alt="XR System Settings" class="inline"/>
<p>Notes:</p><ul>
<li>Make sure to set the TrackingSystem on XRSystem. It will initially be set to None.</li>
<li>Additionally, if this is the first time you are setting up a Vuforia-based project and you select the "Marker Based AR" tracking type, you may need to use the GameObject menu in Unity to add a Vuforia prefab in order to force the Vuforia components to install into your project. You may delete it afterwards.</li>
<li>R2D2 will be configured with a default set of sounds that come with <a class="el" href="de/d75/namespace_juniper.html">Juniper</a>. These sounds are Star Trek sound effects, so they will not be appropriate to deploy to a production system. Make sure you find a new set of sounds appropriate for your application.</li>
<li>TrackerKeeper has a number of interesting events for managing your project workflow. It's recommended that you run Vuforia in Delayed Initialization mode, so your application can start with a splash-screen/menu view without the camera constantly running an draining the battery. </li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Development</h1>
<p>Clone the repository and copy the <code>Package/</code> directory to one of the <code>Test/&lt;PlatformName&gt;Test/Assets</code> directories.</p>
<h2><a class="anchor" id="autotoc_md23"></a>
Tools</h2>
<ul>
<li><a href="https://unity3d.com/get-unity/download">Unity Hub</a>. Unity Hub is very handy for managing different versions of Unity between different projects. There is also a link in Unity Hub to the Unity Download Archive for any version that Unity does not advertise through the Available Installs screen.<ul>
<li><b>For Magic Leap</b>: <a href="https://unity3d.com/partners/magicleap">Magic Leap maintains their own fork of the Unity Editor</a>. It's currently an older version of Unity that is not compatible with the new Nestable Prefabs system, so be careful not to mix versions. You can upgrade from 2018.1 to later versions, but your scenes and prefabs will crash the editor if you try to downgrade. For that reason, there are copies of scenes and prefabs in the <a class="el" href="de/d75/namespace_juniper.html">Juniper</a> project specifically for Unity 2018.1.</li>
</ul>
</li>
<li><a href="https://visualstudio.microsoft.com/vs/">Visual Studio</a>. Unity can install this by default for you.</li>
<li><a href="https://www.blender.org/download/">Blender</a>. There are a few 3D models in the project repository that Unity requires Blender to be installed to be able to import them.</li>
<li><a href="https://nerdur.com/todour-pl/">Toudor</a>. The issues list for <a class="el" href="de/d75/namespace_juniper.html">Juniper</a> is maintained as a <code>todo.txt</code> file in the root of the project. Toudour provides a nice GUI for editing the list.</li>
<li><a href="http://www.doxygen.nl/download.html">Doxygen</a>. This is only necessary for updating the documentation in <a class="el" href="de/d75/namespace_juniper.html">Juniper</a>, but it's a good idea to use it on your projects, too. Make sure to add it to your PATH.</li>
<li><a href="https://www.graphviz.org/download/">GraphViz</a>. This is used by Doxygen to generate nicer diagrams for the documentation. Make sure to add it to your PATH.</li>
<li><a href="https://github.com/boyter/scc/releases">scc</a>. This is used by the documentation generation scripts to estimate the project complexity. Make sure to add it to your PATH.</li>
</ul>
<h2><a class="anchor" id="autotoc_md24"></a>
Debugging</h2>
<p>The prefab at: </p><pre class="fragment">Juniper/Prefabs/DebugUI.prefab
</pre><p>Contains a Canvas and Text element that is used by the various components to print out their status.</p>
<p>GPSLocation, SunPosition, Weather, and OutdoorLightEstimate all have boolean values controlling whether or not they provide real world values versus static values defined at design time. That boolean is called <code>Fake &lt;X&gt;</code>, where X is whatever property is being faked. They also include a boolean called <code>Print Debug Report</code> that enables showing the current status of the component on the ScreenDebugger.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Platform Notes</h2>
<p>These are notes specific to each AR subsystem and/or operating system</p>
<h3>Hololens</h3>
<h4>Build settings</h4>
<p>The Hololens documentation talks about a Unity Build setting "C# Projects" that enables completing the build and deploying to the device from Visual Studio rather than from Unity. The rationale for this feature is that it makes it faster to iterate on <em>changes</em> to scripts. If you want to make changes to the scene, to any assets, or add any scripts, you need to still do it through Unity.</p>
<p>As of Version 2017.2 of Unity, this feature is broken, defaulting the Build Target Architecture to ARM. Just manually change the architecture to x86 (not x64).</p>
<h1><a class="anchor" id="autotoc_md26"></a>
Code Metrics</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
Juniper</h2>
<div class="fragment"><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Language                     Files       Lines      Code    Comments     Blanks</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">C#                              71        9028      4747        3466        815</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Total                           71        9028      4747        3466        815</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Estimated Cost to Develop $270,920</div><div class="line">Estimated Schedule Effort 7.240829 months</div><div class="line">Estimated People Required 2.267785</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div></div><!-- fragment --><h2><a class="anchor" id="autotoc_md28"></a>
Juniper.Unity</h2>
<div class="fragment"><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Language                     Files       Lines      Code    Comments     Blanks</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">C#                             296       33233     22871        5957       4405</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Total                          296       33233     22871        5957       4405</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Estimated Cost to Develop $1,412,055</div><div class="line">Estimated Schedule Effort 13.559753 months</div><div class="line">Estimated People Required 6.311718</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div></div><!-- fragment --><h2><a class="anchor" id="autotoc_md29"></a>
Juniper.Units</h2>
<p><a href="https://capnmidnight.github.io/Juniper.Units">project site</a></p>
<div class="fragment"><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Language                     Files       Lines      Code    Comments     Blanks</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">C#                             100       11647      5081        5210       1356</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Total                          100       11647      5081        5210       1356</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Estimated Cost to Develop $290,970</div><div class="line">Estimated Schedule Effort 7.439962 months</div><div class="line">Estimated People Required 2.370423</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div></div><!-- fragment --><h2><a class="anchor" id="autotoc_md30"></a>
Juniper.NeuroSky</h2>
<p><a href="https://capnmidnight.github.io/Juniper.NeuroSky">project site</a></p>
<div class="fragment"><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Language                     Files       Lines      Code    Comments     Blanks</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">C#                              35         964       634         207        123</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Total                           35         964       634         207        123</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div><div class="line">Estimated Cost to Develop $32,718</div><div class="line">Estimated Schedule Effort 3.242878 months</div><div class="line">Estimated People Required 0.611523</div><div class="line">───────────────────────────────────────────────────────────────────────────────</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
